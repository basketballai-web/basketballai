<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Robot G√ºncel Basketbol Ma√ß Sonucu Analizi</title>
    <style>
        /* Renk K√∂kleri */
        :root {
            --color-primary: #007bff; /* Mavi - Genel Vurgu */
            --color-secondary: #6c757d; /* Gri - Metinler */
            --color-alt: #c0392b; /* KESƒ∞N KIRMIZI - ALT Tahmin */
            --color-ust: #00b300; /* √áOK CANLI Bƒ∞R YE≈ûƒ∞L - √úST Tahmin */ 
            --color-best-pick: #ff9900; /* Turuncu - En G√ºvenilir Se√ßim Vurgusu */
            --color-background: #f8f9fa; /* A√ßƒ±k Gri Arka Plan */
            --color-card: #ffffff; /* Beyaz Kart Arka Plan */
            --color-border: #e9ecef; /* Kart Sƒ±nƒ±rƒ± */
            --color-text: #343a40;
            
            /* Neon Renkleri */
            --color-neon-blue: #00aaff;
        }

        /* GENEL STƒ∞L VE RESET */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px 10px;
            background-color: var(--color-background);
            color: var(--color-text);
            font-size: 16px;
        }
        * { box-sizing: border-box; }

        /* BA≈ûLIK VE √ñZET STƒ∞Lƒ∞ */
        .header-container {
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            background-color: var(--color-card);
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        .header {
            font-size: 2em;
            color: var(--color-primary);
            margin-bottom: 5px;
            font-weight: 800;
        }
        .subheader {
            font-size: 1.1em;
            color: var(--color-secondary);
            font-weight: 500;
        }
        .summary-box {
            padding: 15px;
            margin-top: 15px;
            border: 2px solid var(--color-best-pick);
            background-color: rgba(255, 153, 0, 0.1);
            border-radius: 8px;
            font-weight: 600;
            color: var(--color-text);
        }
        .summary-box strong {
            color: var(--color-best-pick);
        }

        /* MA√á Lƒ∞STESƒ∞ D√úZENƒ∞ */
        .match-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        /* MA√á KARTI */
        .match-card {
            background-color: var(--color-card);
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 1px solid var(--color-border);
        }
        
        /* KART ƒ∞√áERƒ∞ƒûƒ∞ */
        .match-title {
            padding: 15px;
            background-color: var(--color-primary);
            color: white;
            font-weight: 700;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .match-body {
            padding: 15px;
        }
        .prediction-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        /* TAHMƒ∞N KUTUSU (ALT/√úST) - ZEMƒ∞N RENKLERƒ∞ */
        .pred-box {
            flex-grow: 1;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: 900;
            color: white;
            font-size: 1.8em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .pred-box.alt { 
            background-color: var(--color-alt); /* KIRMIZI ZEMƒ∞N */
        }
        .pred-box.ust { 
            background-color: var(--color-ust); /* YE≈ûƒ∞L ZEMƒ∞N (√áOK CANLI) */
        }

        /* G√úVEN VE A√áIKLAMA */
        .confidence {
            margin-left: 15px;
            width: 100px;
            text-align: center;
            font-size: 1em;
            font-weight: 700;
            color: var(--color-primary);
        }
        .limit-value {
            display: block;
            font-size: 0.7em;
            font-weight: 500;
            margin-top: 5px;
            opacity: 0.9;
        }

        /* Dƒ∞NAMƒ∞K Gƒ∞ZLEME SINIFI */
        .hidden {
            display: none !important;
        }

        /* Y√úKLEME √áUBUƒûU VE BUTON STƒ∞LLERƒ∞ */
        .loading-bar-container {
            text-align: center;
            padding: 10px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            margin-bottom: 15px;
        }
        .loading-bar {
            width: 0;
            height: 10px;
            background-color: var(--color-best-pick);
            border-radius: 5px;
            margin: 5px 0 10px 0;
            transition: none;
            display: block;
        }
        .reveal-button {
            text-align: center;
            padding: 15px;
            color: white;
            font-weight: 700;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 15px;
            border: none;
            width: 100%;
            font-size: 1.1em;
            background-color: var(--color-neon-blue);
        }
        
        /* MOBƒ∞L UYUMLULUK */
        @media (max-width: 650px) {
            .match-list {
                grid-template-columns: 1fr;
            }
            .match-title {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            .prediction-section {
                flex-direction: column;
            }
            .pred-box {
                width: 100%;
                margin-left: 0;
                margin-right: 0;
            }
            .confidence {
                margin-top: 10px;
                margin-left: 0;
            }
        }
    </style>
</head>
<body>

    <div class="header-container">
        <div class="header">
            ‚¨ÜÔ∏è‚¨áÔ∏è Robot Sim√ºlasyon Analizi
        </div>
        <div class="subheader">
            Detaylƒ± Ma√ß Sonu√ßlarƒ± Tahmin Formatƒ±na Uyarlanmƒ±≈ütƒ±r
        </div>
        <div class="summary-box">
            <strong id="summary-text">Ma√ßlar, robot verilerine g√∂re analiz edilmi≈ütir.</strong>
        </div>
    </div>

    <div class="match-list" id="match-list">
        </div>

    <script>
        
        // --- VERƒ∞ ALANI ---
        const originalData = [
            { time: '20:00', home: 'Cluj Napoca', away: 'Hapoel Jerusalem', total: 193, lig: 'EURO CUP' }, 
            { time: '20:00', home: 'Neptunas K.', away: 'Aris', total: 171, lig: 'EURO CUP' }, 
            { time: '20:00', home: 'Galatasaray', away: 'Trieste', total: 183, lig: 'FIBA ≈ûAMPƒ∞YONLAR Lƒ∞Gƒ∞' }, 
            { time: '20:30', home: 'MLP A. Heidelberg', away: 'Promitheas', total: 158, lig: 'FIBA ≈ûAMPƒ∞YONLAR Lƒ∞Gƒ∞' }, 
            { time: '20:45', home: 'Legia Warsz.', away: 'Rytas Vilnius', total: 177, lig: 'FIBA ≈ûAMPƒ∞YONLAR Lƒ∞Gƒ∞' }, 
            { time: '21:00', home: 'Buducnost', away: 'Ratiopharm Ulm', total: 174, lig: 'EURO CUP' }, 
            { time: '21:00', home: 'Slask Wroclaw', away: 'Bah√ße≈üehir Koleji', total: 170, lig: 'EURO CUP' }, 
            { time: '22:00', home: 'A. Basket Trento', away: 'Niners Chemnitz', total: 158, lig: 'EURO CUP' }, 
            { time: '22:00', home: 'Le Mans', away: 'Gran Canaria', total: 172, lig: 'FIBA ≈ûAMPƒ∞YONLAR Lƒ∞Gƒ∞' } 
        ];

        // Bahis Limitleri
        const limits = {
            'Cluj Napoca - Hapoel Jerusalem': 181.5,
            'Neptunas K. - Aris': 175.5,
            'Galatasaray - Trieste': 178.5,
            'MLP A. Heidelberg - Promitheas': 166.5,
            'Legia Warsz. - Rytas Vilnius': 169.5,
            'Buducnost - Ratiopharm Ulm': 170.5,
            'Slask Wroclaw - Bah√ße≈üehir Koleji': 169.5,
            'A. Basket Trento - Niners Chemnitz': 165.5,
            'Le Mans - Gran Canaria': 164.5
        };
        // --- /VERƒ∞ ALANI ---

        function transformToPredictionData(data) {
            let transformed = [];
            data.sort((a, b) => a.time.localeCompare(b.time));

            data.forEach((match, index) => {
                const teamKey = `${match.home} - ${match.away}`;
                const limit = limits[teamKey];
                const total = match.total;
                
                if (limit === undefined) return;

                const predictionType = total > limit ? '√úST' : 'ALT';
                const difference = Math.abs(total - limit);
                
                let confidence = 55 + Math.min(35, Math.floor(difference * 4)); 

                let comment;
                if (predictionType === '√úST') {
                    comment = `Ma√ßƒ±n MS Toplam Skoru (${total}), belirlenen baremin (${limit}) √úST√úNDE ger√ßekle≈ümi≈ütir. Y√ºksek tempo sim√ºlasyonu.`;
                } else {
                    comment = `Ma√ßƒ±n MS Toplam Skoru (${total}), belirlenen baremin (${limit}) ALTINDA ger√ßekle≈ümi≈ütir. Kontroll√º oyun sim√ºlasyonu.`;
                }
                
                transformed.push({
                    id: `match-${index + 1}`,
                    time: match.time,
                    teams: `${match.home} ‚Äì ${match.away} (${match.lig})`,
                    prediction: predictionType,
                    limit: limit,
                    confidence: confidence,
                    isVip: false,
                    comment: comment
                });
            });

            if (transformed.length > 0) {
                let highestConfidence = 0;
                let bestMatchIndex = -1;
                
                transformed.forEach((match, index) => {
                    if (match.confidence > highestConfidence) {
                        highestConfidence = match.confidence;
                        bestMatchIndex = index;
                    }
                });
                
                if (bestMatchIndex !== -1) {
                    transformed[bestMatchIndex].isVip = true;
                }
            }
            return transformed;
        }

        const matchData = transformToPredictionData(originalData);

        
        /**
         * A√ßƒ±k olan t√ºm tahminleri kapatƒ±r.
         */
        function closeAllPredictions() {
            document.querySelectorAll('.match-card').forEach(card => {
                card.querySelector('.prediction-content').classList.add('hidden');
                card.querySelector('.explanation').classList.add('hidden');
                card.querySelector('.loading-bar-container').classList.add('hidden');
                const revealButton = card.querySelector('.reveal-button');
                if (revealButton) {
                    revealButton.classList.remove('hidden');
                }
            });
        }

        /**
         * Tahmin i√ßin y√ºkleme sim√ºlasyonunu ba≈ülatƒ±r ve sonucu g√∂sterir.
         * window.loadDelayedPrediction olarak tanƒ±mlandƒ± ki onClick eventi doƒüru √ßalƒ±≈üsƒ±n.
         */
        window.loadDelayedPrediction = function(matchId, predictionType, limit, confidence, comment) {
            const card = document.getElementById(matchId);
            if (!card) return;

            const revealButton = card.querySelector('.reveal-button');
            const loadingContainer = card.querySelector('.loading-bar-container');
            const explanation = card.querySelector('.explanation');
            const predictionContent = card.querySelector('.prediction-content');
            
            closeAllPredictions();

            // Loading Container'ƒ± sƒ±fƒ±rla ve g√∂ster
            loadingContainer.innerHTML = `
                <span class="loading-text">Analiz Y√ºr√ºt√ºl√ºyor... <span class="loading-text-percentage">0%</span></span>
                <div class="loading-bar"></div>
            `;
            loadingContainer.classList.remove('hidden');
            revealButton.classList.add('hidden');
            
            const loadingBar = card.querySelector('.loading-bar');
            const percentageSpan = card.querySelector('.loading-text-percentage');
            let percentage = 0;

            const interval = setInterval(() => {
                if (percentage < 100) {
                    percentage += 5;
                    loadingBar.style.width = `${percentage}%`;
                    percentageSpan.textContent = `${percentage}%`;
                } else {
                    clearInterval(interval);
                    loadingContainer.classList.add('hidden');
                    
                    // Tahmin i√ßeriƒüini g√ºncelleme ve g√∂sterme
                    predictionContent.innerHTML = `
                        <div class="pred-box ${predictionType.toLowerCase()}">
                            ${predictionType}
                            <span class="limit-value">(Limit: ${limit})</span>
                        </div>
                        <div class="confidence ${confidence >= 80 ? 'high' : ''}">G: %${confidence}</div>
                    `;
                    predictionContent.classList.remove('hidden');

                    // Gerek√ßeyi g√∂sterme
                    explanation.innerHTML = `
                        <strong>Gerek√ße:</strong> ${comment}
                    `;
                    explanation.classList.remove('hidden');
                }
            }, 100); 
        };
        
        /**
         * Ma√ß kartlarƒ±nƒ± veriye g√∂re olu≈üturur ve sayfaya ekler.
         */
        function renderMatches() {
            const matchList = document.getElementById('match-list');
            if (!matchList) return; 

            matchList.innerHTML = ''; 

            let bestMatch = matchData.find(match => match.isVip);

            // √ñzeti g√ºncelle
            const summaryTextElement = document.getElementById('summary-text');
            if (bestMatch && summaryTextElement) {
                 summaryTextElement.innerHTML = `üî• **G√ºn√ºn En G√ºvenilir Ma√ßƒ± (%${bestMatch.confidence}):** ${bestMatch.teams} ‚Üí ${bestMatch.prediction}`;
            }

            matchData.forEach(match => {
                const card = document.createElement('div');
                card.id = match.id;
                card.className = `match-card ${match.isVip ? 'best-pick' : ''}`;

                // Kartƒ±n HTML i√ßeriƒüi
                card.innerHTML = `
                    <div class="match-title">
                        <span class="match-time">${match.time}</span>
                        <span class="team-names">${match.teams}</span>
                    </div>
                    <div class="match-body">
                        <div class="loading-bar-container hidden"></div>
                        
                        <div class="prediction-section hidden prediction-content"></div>

                        <div class="reveal-button blue" 
                             onclick="window.loadDelayedPrediction('${match.id}', '${match.prediction}', '${match.limit}', ${match.confidence}, '${match.comment.replace(/'/g, "\\'")}')">
                            Tahmini G√∂r
                        </div>

                        <div class="explanation hidden"></div>
                    </div>
                `;
                matchList.appendChild(card);
            });
        }

        // Sayfa y√ºklendiƒüinde ma√ßlarƒ± olu≈ütur
        document.addEventListener('DOMContentLoaded', renderMatches);

    </script>
</body>
</html>
