<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="robots" content="noindex, nofollow"> 
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>BasketbolAi - Tahminler</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
<style>
  /*
  *** STƒ∞L TANIMLARI - ƒ∞STENEN G√ñRSEL ƒ∞Yƒ∞LE≈ûTƒ∞RMELER UYGULANDI ***
  */
  :root{
    --bg:#0f1720;
    --panel:#0b1620;
    --card-bg:#0f2230;
    --accent-start:#7b2ff7;
    --accent-end:#3b8dff;
    --orange:#ff7a00;
    --tech-blue:#3ba4ff;
    --success:#28d07b;
    --warning:#ffd460;
    --high-risk:#ff7a00; 
    --muted:#96a0b5;
    --text:#e6eef8; 
    --gold-text: #ffd460; 
    --radius:18px;
    /* YENƒ∞ SOFT SEKME RENKLERƒ∞ */
    --tab-default-bg: #1c3042; 
    --tab-active-start: #3ba4ff; 
    --tab-active-end: #7b2ff7; 
    --tab-active-bg: linear-gradient(90deg, var(--tab-active-start), var(--tab-active-end)); 
  }
  
  /* Risk Renk E≈üle≈ümeleri */
  .risk-d√º≈ü√ºk { background-color: var(--success); color: var(--success); }
  .risk-orta { background-color: var(--warning); color: var(--warning); }
  .risk-y√ºksek { background-color: var(--high-risk); color: var(--high-risk); }
  .risk-√ßok-d√º≈ü√ºk { background-color: var(--success); color: var(--success); }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:'Inter',system-ui,Segoe UI,Roboto,-apple-system,Helvetica,Arial;
    background: linear-gradient(180deg, rgba(23,12,37,0.9), rgba(12,12,20,1));
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-smoothing:grayscale;
    padding:18px;
    display:flex;justify-content:center;
  }
  .container{
    width:100%;
    max-width:420px;
    border-radius:26px;
    overflow:hidden;
    background:linear-gradient(90deg,var(--accent-start),var(--accent-end));
    padding:14px;
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
  }
  .inner{
    border-radius:16px;
    /* BASKETBOL DOKUNU≈ûU: PARKET ZEMƒ∞N ETKƒ∞Sƒ∞ */
    background: 
      repeating-linear-gradient(90deg, #111e2b, #111e2b 1px, transparent 1px, transparent 100px),
      repeating-linear-gradient(0deg, #111e2b, #111e2b 1px, transparent 1px, transparent 100px),
      var(--panel); 
    background-blend-mode: overlay; 
    background-size: 100% 100%, 100% 100%, 100% 100%;
    
    padding:14px;
  }
  .header{
    display:flex;
    flex-direction: column; 
    align-items:center;
    justify-content:center; 
    margin-bottom:12px;
  }
  .title{
    font-weight:800;
    font-size:18px; 
    line-height:1.2;
    color:var(--text);
    white-space: nowrap; 
    margin-bottom: 4px; 
  }
  .powered-by-ai {
    font-size: 14px; 
    font-weight: 600; 
    color: var(--tech-blue); 
    opacity: 1; 
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  
  /* YENƒ∞ SEKME D√úZENLEMESƒ∞: ƒ∞LK SIRAYA SIƒûDIRMA */
  .tabs{
    display:flex;
    flex-wrap: wrap; 
    gap: 6px; 
    margin: 14px 0; 
    justify-content: space-between;
  } 
  .tab{
    /* 3 sekmenin ve Kuponlar sekmesinin d√ºzenlenmesi */
    flex: 1 1 29%; 
    padding: 8px 3px; 
    border-radius: 10px;
    text-align: center;
    font-weight: 700;
    cursor: pointer;
    font-size: 10px; 
    background: var(--tab-default-bg); 
    color: var(--text);
    white-space: nowrap; 
    transition: all 0.2s ease;
    min-width: 0; 
  }
  /* Kuponlar sekmesi, tam geni≈ülikte alt sƒ±rada kalmasƒ± i√ßin */
  .tab[data-tab="kuponlar"] {
    flex: 1 1 100%; 
    margin-top: 4px;
    font-size: 12px;
  }
  
  .tab.active{
    background: var(--tab-active-bg);
    color: #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.5); 
    border: 1px solid rgba(255,255,255,0.2); 
  }
  .content{padding-bottom:18px}
  
  /* G√úVEN ORANLARININ OLDUƒûU ALAN D√úZENLEMESƒ∞ */
  .success-rates {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 5px 0;
  }
  /* TEK Bƒ∞R ƒ∞STATƒ∞STƒ∞K KALDIƒûI ƒ∞√áƒ∞N Hƒ∞ZALAMA */
  .success-rate-item {
      flex-grow: 1;
      text-align: left; /* Ortalama Ba≈üarƒ± sola yana≈ütƒ± */
  }
  .success-rate-item:nth-child(2) {
      flex-grow: 0;
      text-align: right; /* Sistem Online saƒüa yana≈ütƒ± */
  }
  .rate-label {
    font-size: 11px;
    color: var(--muted);
    font-weight: 500;
    text-transform: uppercase;
  }
  .rate-value {
    font-weight: 900;
    font-size: 18px;
    margin-top: 4px;
    color: var(--success); /* Ye≈üil renk korundu */
    display: block;
    line-height: 1;
  }

  /* MATCH CARD */
  .match-card{
    background:var(--card-bg);border-radius:12px;padding:12px;margin-bottom:12px;border:1px solid rgba(255,255,255,0.02)
  }
  .match-head{display:flex;justify-content:space-between;align-items:flex-start;gap:8px;margin-bottom:12px}
  .match-title{font-weight:800;font-size:16px; line-height: 1.3;}
  .match-datetime {
    font-weight: 600; 
    color: var(--warning); 
    font-size: 13px; 
    display: block; 
    margin-top: 4px;
  }
  .risk-ev-wrap{display:flex;flex-direction:column;align-items:flex-end;gap:4px;}
  /* Rƒ∞SK METNƒ∞ ƒ∞√áƒ∞N YENƒ∞ RENK UYGULAMASI */
  .risk-text {
      font-size: 14px; 
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 6px;
  }
  .risk-dot{width:10px;height:10px;border-radius:50%;display:inline-block;}

  /* TAHMƒ∞N Bƒ∞LGƒ∞LERƒ∞ */
  .bet-preference{
    font-weight:800;
    color:var(--tech-blue);
    font-size:14px;
    margin-top:8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .bet-preference span.barem-value {
    font-weight: 700;
    color: var(--orange);
    font-size: 16px;
  }
  .bet{
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.1));
    border-radius:10px;padding:12px;margin-top:8px;border:1px solid rgba(255,255,255,0.02)
  }
  .bet-detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    padding-bottom: 8px;
    border-bottom: 1px dashed rgba(255,255,255,0.1);
  }
  .bet-detail-row:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
  }
  /* TOPLAM TAHMƒ∞N YAZAN YERLER SARI */
  .bet-col-left {
    font-weight:800;
    color:var(--gold-text); 
    font-size:15px;
  }
  .bet-col-right {
    text-align: right;
  }
  /* ORANLAR BEYAZ YAPILDI */
  .bet .odd{font-size:28px;font-weight:900;margin-bottom:2px;color:var(--text);}
  .muted-small{color:var(--muted);font-size:11px; font-weight: 500;}
  
  /* PROGRESS BAR */
  .progress-wrap{background:rgba(255,255,255,0.04);height:10px;border-radius:999px;margin-top:8px;overflow:hidden}
  .progress-bar{height:100%;width:0%;transition:width 600ms ease}
  .progress-bar.conf { background: var(--success); }
  .confidence-row{display:flex;justify-content:space-between;align-items:center;margin-top:8px;color:var(--muted);font-size:13px}
  .confidence-row span:last-child {
      font-weight: 700;
      color: var(--text);
  }

  /* KUPON STƒ∞LLERƒ∞ */
  .kupon-title-bold {
      font-size: 18px;
      font-weight: 900;
      color: var(--warning); 
      margin-bottom: 10px;
      text-align: center;
  }
  .kupon-match-row {
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.05);
      border-left: 4px solid var(--accent-end);
  }
  .kupon-match-title {
      font-weight: 600;
      font-size: 14px;
      color: var(--text);
  }
  .kupon-bet-detail {
      font-weight: 800;
      font-size: 16px;
      color: var(--success);
      margin-top: 4px;
      display: flex;
      justify-content: space-between;
  }
  /* ORANLAR BEYAZ YAPILDI */
  .kupon-odd-value {
      color: var(--text);
      font-size: 18px;
      font-weight: 900;
  }
  .kupon-risk-indicator {
      font-size: 14px;
      font-weight: 700;
      margin-top: 15px;
      padding: 8px 15px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.05);
  }
  .kupon-date-time {
    font-size: 13px; 
    color: var(--muted); 
    font-weight: 600; 
    margin-bottom: 10px;
    display: block;
    width: 100%;
    text-align: center;
  }

  /* TOPLAM ORAN ALANI */
  .total-odd-area {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 2px dashed rgba(255,255,255,0.1);
      width: 100%;
      text-align: center;
  }
  .total-odd-value {
      font-size: 40px;
      font-weight: 900;
      color: var(--orange);
      line-height: 1;
      display: block;
  }
  .kupon-confidence-row {
      margin-top: 10px;
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
  }
  .kupon-confidence-row span:last-child {
      color: var(--success);
      font-weight: 800;
      margin-left: 5px;
  }
  .kupon-extra-info {
      display: flex;
      justify-content: space-around;
      align-items: center;
      width: 100%;
      margin-top: 15px;
      font-size: 14px;
      font-weight: 600;
      padding: 10px 0;
  }

  /* Sistem Online G√∂stergesi */
  @keyframes pulse-online {
    0% { box-shadow: 0 0 0 0 rgba(40, 208, 123, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(40, 208, 123, 0); }
    100% { box-shadow: 0 0 0 0 rgba(40, 208, 123, 0); }
  }
  .system-online-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: flex-end; 
  }
  .online-dot {
    width: 10px;
    height: 10px;
    background-color: var(--success);
    border-radius: 50%;
    animation: pulse-online 1.5s infinite;
  }
</style>
</head>
<body>
<div class="container" role="application" aria-label="BasketballAi WebApp">
  <div class="inner">
    <div class="header">
        <div class="title">üèÄ BASKETBOL AI BOT v5.0</div>
        <div class="powered-by-ai">POWERED BY AI</div>
    </div>

    <div class="success-rates"> 
      <div class="success-rate-item">
        <span class="rate-label">Ortalama Ba≈üarƒ±</span>
        <span class="rate-value" style="color: var(--success);">%79</span> 
      </div>
      
      <div class="success-rate-item system-online-indicator">
        <div style="font-size:12px;color:var(--success); font-weight:700; white-space: nowrap;">Sƒ∞STEM ONLƒ∞NE</div>
        <div class="online-dot"></div>
      </div>
    </div>

    <div class="tabs" role="tablist" aria-label="Ana Sekmeler">
      <div class="tab" data-tab="high_conf" role="tab" aria-selected="true">Y√úKSEK G√úVEN</div> 
      <div class="tab" data-tab="medium_conf" role="tab" aria-selected="false">ORTA G√úVEN</div> 
      <div class="tab" data-tab="all_preds" role="tab" aria-selected="false">T√úM TAHMƒ∞NLER</div> 
      <div class="tab" data-tab="kuponlar" role="tab" aria-selected="false">üî• KUPONLAR</div> 
    </div>

    <div class="content" id="content">
      </div>

  </div>
</div>

<script>
// ****************************** VERƒ∞ YAPILARI ******************************

// T√ºm ma√ß verilerini tek bir listeye toplama ve sƒ±nƒ±flama (High/Medium)
const RAW_ALL_PREDICTIONS = [
    // √ñNE √áIKAN TAHMƒ∞NLER (G√ºven ‚â•70% -> HIGH CONFIDENCE)
    { title: "Tenerife vs Murcia", prediction: "MS1 -7.5", odd: 1.68, confidence: 72, time: "21:00", date: "18.10.2025", league: "ACB", type: "high" },
    { title: "Donar Groningen vs Okapi Aalstar", prediction: "MS1 -6.5", odd: 1.66, confidence: 70, time: "20:30", date: "18.10.2025", league: "BNXT", type: "high" },
    
    // Y√úKSEK DEƒûERLƒ∞ ORANLAR / √áOK Y√úKSEK HANDƒ∞KAPLAR (G√ºven <70% -> MEDIUM CONFIDENCE)
    { title: "Reyer Venezia vs Trieste", prediction: "MS1 -5.5", odd: 1.62, confidence: 67, time: "21:00", date: "18.10.2025", league: "ƒ∞talya A1", type: "medium" },
    
    // G√úNCELLENDƒ∞: Gipuzkoa vs Estepona -> MS1
    { title: "Gipuzkoa vs Estepona", prediction: "MS1", odd: 1.59, confidence: 60, time: "21:00", date: "18.10.2025", league: "ƒ∞spanya FEB", type: "medium" },
    
    { title: "Orleans Loiret vs Chalons Reims", prediction: "MS2 +8.5", odd: 1.59, confidence: 60, time: "21:00", date: "18.10.2025", league: "Fransa Pro B", type: "medium" },
    { title: "Le Mans vs Bourg En Bresse", prediction: "MS2 +2.5", odd: 1.59, confidence: 62, time: "21:30", date: "18.10.2025", league: "Fransa Pro A", type: "medium" },
    // matchTitle alanƒ± kaldƒ±rƒ±ldƒ±, title yeterli.
    { title: "Baskonia vs Bal", prediction: "MS2 +18.5", odd: 1.63, confidence: 64, time: "21:30", date: "18.10.2025", league: "Bel√ßika", type: "medium" },
    
    // !!! G√úNCEL TAHMƒ∞N (ƒ∞stenen g√ºncelleme) !!!
    { title: "Virtus Imola vs Luiss Roma", prediction: "MS2 H -15.5", odd: 1.60, confidence: 65, time: "20:30", date: "18.10.2025", league: "ƒ∞talya B", type: "medium" },
    
    { title: "Crailsheim vs Paderborn", prediction: "MS2 +15.5", odd: 1.61, confidence: 62, time: "21:00", date: "18.10.2025", league: "Almanya B", type: "medium" },
    
    // G√úNCELLENDƒ∞: Ca Queluz vs Vitoria -> MS2 +4.5
    { title: "Ca Queluz vs Vitoria", prediction: "MS2 +4.5", odd: 1.65, confidence: 64, time: "20:45", date: "18.10.2025", league: "Portekiz", type: "medium" },
    
    { title: "Landerneau vs R. Vendee", prediction: "MS1 -4.5", odd: 1.60, confidence: 61, time: "21:00", date: "18.10.2025", league: "Fransa Kadƒ±nlar", type: "medium" },
    { title: "Ubc M√ºnster vs Vfl Bochum", prediction: "MS1 -3.5", odd: 1.59, confidence: 61, time: "20:30", date: "18.10.2025", league: "Almanya B", type: "medium" },
    { title: "Basket Zaragoz vs Breogan", prediction: "MS2 +10.5", odd: 1.65, confidence: 61, time: "22:00", date: "18.10.2025", league: "ACB", type: "medium" },
    
];

// Kupon verileri (Toplam Oran ve G√ºven deƒüerleri dinamik olarak hesaplanacaƒüƒ± i√ßin statik deƒüerler kaldƒ±rƒ±ldƒ±)
const KUPON_DATA = [
    { 
        title: "KUPON 1: Y√úKSEK G√úVEN (3'L√ú K√ú√á√úK KUPON)", 
        risk: "D√ú≈û√úK", 
        stake: "Belirtilmemi≈ü",
        matches: [
            { title: "Tenerife - Murcia", prediction: "MS1 (-7.5)", odd: 1.68, confidence: 72, time: "21:00", date: "18.10.2025" },
            { title: "Donar Groningen - Okapi", prediction: "MS1 (-6.5)", odd: 1.66, confidence: 70, time: "20:30", date: "18.10.2025" },
            { title: "Reyer Venezia - Trieste", prediction: "MS1 (-5.5)", odd: 1.62, confidence: 67, time: "21:00", date: "18.10.2025" },
        ]
    },
    { 
        title: "KUPON 2: DEƒûER AVCI (3'L√ú HANDIKAP)",
        risk: "ORTA", 
        stake: "Belirtilmemi≈ü",
        matches: [
            { title: "Ca Queluz - Vitoria", prediction: "MS2 (+4.5)", odd: 1.65, confidence: 64, time: "20:45", date: "18.10.2025" }, 
            { title: "Belfius Mons - Bal", prediction: "MS2 (+18.5)", odd: 1.63, confidence: 64, time: "21:30", date: "18.10.2025" },
            { title: "Crailsheim - Paderborn", prediction: "MS2 (+15.5)", odd: 1.61, confidence: 62, time: "21:00", date: "18.10.2025" },
        ]
    },
    { 
        title: "KUPON 3: BALANCED MIX (5'L√ú ORTA)", 
        risk: "ORTA", 
        stake: "Belirtilmemi≈ü",
        matches: [
            { title: "Tenerife - Murcia", prediction: "MS1 (-7.5)", odd: 1.68, confidence: 72, time: "21:00", date: "18.10.2025" },
            { title: "Donar Groningen - Okapi", prediction: "MS1 (-6.5)", odd: 1.66, confidence: 70, time: "20:30", date: "18.10.2025" },
            { title: "Ca Queluz - Vitoria", prediction: "MS2 (+4.5)", odd: 1.65, confidence: 64, time: "20:45", date: "18.10.2025" }, 
            { title: "Belfius Mons - Bal", prediction: "MS2 (+18.5)", odd: 1.63, confidence: 64, time: "21:30", date: "18.10.2025" },
            { title: "Landerneau - R. Vendee", prediction: "MS1 (-4.5)", odd: 1.60, confidence: 61, time: "21:00", date: "18.10.2025" },
        ]
    },
    { 
        title: "KUPON 4: RISK ALAN (6'L√ú Y√úKSEK ORAN)", 
        risk: "Y√úKSEK", 
        stake: "Belirtilmemi≈ü",
        matches: [
            { title: "Ubc M√ºnster - Vfl Bochum", prediction: "MS1 (-3.5)", odd: 1.59, confidence: 61, time: "20:30", date: "18.10.2025" },
            { title: "Donar Groningen - Okapi", prediction: "MS1 (-6.5)", odd: 1.66, confidence: 70, time: "20:30", date: "18.10.2025" },
            { title: "Orleans Loiret - Chalons", prediction: "MS2 (+8.5)", odd: 1.59, confidence: 60, time: "21:00", date: "18.10.2025" },
            { title: "Le Mans - Bourg En Bresse", prediction: "MS2 (+2.5)", odd: 1.59, confidence: 62, time: "21:30", date: "18.10.2025" },
            { title: "Reyer Venezia - Trieste", prediction: "MS1 (-5.5)", odd: 1.62, confidence: 67, time: "21:00", date: "18.10.2025" },
            { title: "Basket Zaragoz - Breogan", prediction: "MS2 +10.5", odd: 1.65, confidence: 61, time: "22:00", date: "18.10.2025" },
        ]
    },
    { 
        title: "KUPON 5: G√úVENLƒ∞ Lƒ∞MAN (2'L√ú BANKER)", 
        risk: "√áOK D√ú≈û√úK", 
        stake: "Belirtilmemi≈ü",
        matches: [
            { title: "Tenerife - Murcia", prediction: "MS1 (-7.5)", odd: 1.68, confidence: 72, time: "21:00", date: "18.10.2025" },
            { title: "Donar Groningen - Okapi", prediction: "MS1 (-6.5)", odd: 1.66, confidence: 70, time: "20:30", date: "18.10.2025" },
        ]
    },
    { 
        title: "KUPON 6: √ñZEL SE√áƒ∞M (3'L√ú PREMIUM)", 
        risk: "ORTA", 
        stake: "Belirtilmemi≈ü",
        matches: [
            { title: "Tenerife - Murcia", prediction: "MS1 (-7.5)", odd: 1.68, confidence: 72, time: "21:00", date: "18.10.2025" },
            { title: "Belfius Mons - Bal", prediction: "MS2 (+18.5)", odd: 1.63, confidence: 64, time: "21:30", date: "18.10.2025" },
            { title: "Reyer Venezia - Trieste", prediction: "MS1 (-5.5)", odd: 1.62, confidence: 67, time: "21:00", date: "18.10.2025" },
        ]
    },
    // !!! G√úNCEL KUPON !!!
    { 
        title: "KUPON 7: ROMA √ñZEL HANDƒ∞KAP (3'L√ú)", 
        risk: "ORTA", 
        stake: "Belirtilmemi≈ü",
        matches: [
            // ƒ∞STENEN G√úNCELLEME
            { title: "Virtus Imola - Luiss Roma", prediction: "MS2 H (-15.5)", odd: 1.60, confidence: 65, time: "20:30", date: "18.10.2025" },
            { title: "Reyer Venezia - Trieste", prediction: "MS1 (-5.5)", odd: 1.62, confidence: 67, time: "21:00", date: "18.10.2025" },
            { title: "Crailsheim - Paderborn", prediction: "MS2 (+15.5)", odd: 1.61, confidence: 62, time: "21:00", date: "18.10.2025" },
        ]
    },
];

// ****************************** YARDIMCI FONKSƒ∞YONLAR ******************************

// Yardƒ±mcƒ± Fonksiyon: Risk sƒ±nƒ±fƒ±nƒ± ve rengini d√∂nd√ºr√ºr
function getRiskInfo(risk) {
    const riskLower = risk.toLowerCase().replace('√ß', 'c').replace('√∂', 'o').replace('√º', 'u'); // '√ßok d√º≈ü√ºk' i√ßin
    let colorVar;
    if (riskLower === 'd√º≈ü√ºk') colorVar = '--success';
    else if (riskLower === 'orta') colorVar = '--warning';
    else if (riskLower === 'y√ºksek') colorVar = '--high-risk';
    else if (riskLower === '√ßok d√º≈ü√ºk') colorVar = '--success';
    else colorVar = '--muted';
    
    const color = getComputedStyle(document.documentElement).getPropertyValue(colorVar);
    // CSS sƒ±nƒ±fƒ± i√ßin T√ºrk√ße karakterleri deƒüi≈ütir
    return { class: `risk-${riskLower.replace(' ', '-')}`, color: color }; 
}

// Yardƒ±mcƒ± Fonksiyon: Kuponun toplam oranƒ±nƒ± ve ortalama g√ºvenini hesaplar (Dinamik Hesaplama)
function calculateKuponStats(kupon) {
    let totalOdd = 1;
    let totalConfidence = 0;
    
    if (kupon.matches.length === 0) {
        return { totalOdd: 0, confidence: 0 };
    }

    kupon.matches.forEach(match => {
        totalOdd *= match.odd;
        totalConfidence += match.confidence;
    });

    const averageConfidence = totalConfidence / kupon.matches.length;
    
    return { 
        totalOdd: totalOdd, 
        confidence: averageConfidence 
    };
}


// Yardƒ±mcƒ± Fonksiyon: Kuponun ilk ma√ßƒ±nƒ±n tarih ve saatini bulur
function getKuponStartTime(kupon) {
    if (kupon.matches.length === 0) return { date: "Tarih Belirsiz", time: "Saat Belirsiz" };
    
    // Tarih ve Saate g√∂re sƒ±ralama ve en erken olanƒ± bulma
    const earliestMatch = kupon.matches.reduce((earliest, current) => {
        // TR formatƒ±ndaki tarihi YYYY-MM-DD formatƒ±na √ßevir
        const parseDate = (dateStr) => {
            if (!dateStr) return null;
            const parts = dateStr.split('.');
            if (parts.length === 3) {
                // YYYY-MM-DD
                return `${parts[2]}-${parts[1]}-${parts[0]}`; 
            }
            return dateStr;
        };
        
        // G√ºvenli tarih/saat kullanƒ±mƒ±
        const dateStrCurrent = current.date || '01.01.2099';
        const timeStrCurrent = current.time || '00:00';
        const currentDateTime = new Date(`${parseDate(dateStrCurrent)}T${timeStrCurrent}:00`);

        const dateStrEarliest = earliest ? earliest.date || '01.01.2099' : dateStrCurrent;
        const timeStrEarliest = earliest ? earliest.time || '00:00' : timeStrCurrent;
        const earliestDateTime = earliest ? new Date(`${parseDate(dateStrEarliest)}T${timeStrEarliest}:00`) : currentDateTime;


        if (isNaN(currentDateTime.getTime())) return earliest; 
        if (earliest && isNaN(earliestDateTime.getTime())) return current;
        if (!earliest || currentDateTime < earliestDateTime) {
            return current;
        }
        return earliest;
    }, kupon.matches[0]); 
    
    return { date: earliestMatch.date || 'Belirsiz', time: earliestMatch.time || 'Belirsiz' };
}


// ****************************** RENDER FONKSƒ∞YONLARI ******************************

// Ma√ß Tahminlerini Listeler
function renderMatches(filterType) {
    const contentDiv = document.getElementById('content');
    contentDiv.innerHTML = ''; 

    let filteredMatches = [...RAW_ALL_PREDICTIONS];
    
    if (filterType === 'high_conf') {
        filteredMatches = filteredMatches.filter(m => m.type === 'high');
    } else if (filterType === 'medium_conf') {
        filteredMatches = filteredMatches.filter(m => m.type === 'medium');
    }
    // 'all_preds' i√ßin filtreleme yok

    // Saate g√∂re sƒ±rala
    filteredMatches.sort((a, b) => {
        const timeA = a.time || '23:59';
        const timeB = b.time || '23:59';
        return timeA.localeCompare(timeB);
    });

    if (filteredMatches.length === 0) {
        contentDiv.innerHTML = '<p style="text-align:center; color:var(--muted); padding:20px;">Bu kategori i√ßin tahmin bulunmamaktadƒ±r.</p>';
        return;
    }

    filteredMatches.forEach(match => {
        const risk = match.confidence >= 70 ? 'D√ú≈û√úK' : (match.confidence >= 65 ? 'ORTA' : 'Y√úKSEK');
        const riskInfo = getRiskInfo(risk);
        const riskColor = riskInfo.color;
        const riskClass = riskInfo.class;
        
        // Baremi prediction string'inden ayƒ±klama
        let barem = 'YOK';
        const baremMatch = match.prediction.match(/[\+\-]\d+\.\d+/);
        if (baremMatch) {
            barem = baremMatch[0];
        }

        const matchCard = `
            <div class="match-card">
                <div class="match-head">
                    <div class="match-info">
                        <div class="match-title">${match.title}</div>
                        <span class="match-datetime">${match.league} | ${match.time}</span>
                    </div>
                    <div class="risk-ev-wrap">
                        <div class="risk-text" style="color: ${riskColor};">
                            <span class="risk-dot ${riskClass}"></span>
                            ${risk.toUpperCase()} Rƒ∞SK
                        </div>
                    </div>
                </div>

                <div class="bet-preference">
                    <div>Robot Tercihi: <span style="font-size: 18px; font-weight: 900; color: var(--success); margin-left: 5px;">${match.prediction}</span></div>
                    <div>Handikap: <span class="barem-value">${barem}</span></div>
                </div>

                <div class="bet">
                    <div class="bet-detail-row">
                        <div class="bet-col-left">ROBOT TAHMƒ∞Nƒ∞</div>
                        <div class="bet-col-right">
                            <span class="odd">${match.odd.toFixed(2)}</span>
                            <span class="muted-small" style="display:block;">ORAN</span>
                        </div>
                    </div>
                    
                    <div class="confidence-row">
                        <span>Robot G√ºven Deƒüeri:</span>
                        <span style="color: var(--success);">${match.confidence}%</span>
                    </div>
                    <div class="progress-wrap">
                        <div class="progress-bar conf" style="width:${match.confidence}%;"></div>
                    </div>
                </div>
            </div>
        `;
        contentDiv.innerHTML += matchCard;
    });
}

// Kuponlarƒ± Listeler (Dinamik Hesaplama i√ßerir)
function renderKuponlar() {
    const contentDiv = document.getElementById('content');
    contentDiv.innerHTML = '';

    KUPON_DATA.forEach(kupon => {
        // D√úZELTME: Toplam Oran ve Ortalama G√ºven dinamik olarak hesaplanƒ±yor.
        const stats = calculateKuponStats(kupon);
        const totalOdd = stats.totalOdd;
        const confidence = stats.confidence;

        const riskInfo = getRiskInfo(kupon.risk);
        const riskColor = riskInfo.color;
        const riskClass = riskInfo.class;
        const kuponStartTime = getKuponStartTime(kupon); 
        
        let matchesHTML = kupon.matches.map(bet => {
            return `
                <div class="kupon-match-row">
                    <div class="kupon-match-title">${bet.title}</div>
                    <div class="kupon-bet-detail">
                        <span>${bet.prediction} (G√ºven: ${bet.confidence}%)</span>
                        <span class="kupon-odd-value">@${bet.odd.toFixed(2)}</span>
                    </div>
                </div>
            `;
        }).join('');

        const kuponCard = `
            <div class="match-card">
                <div style="text-align: center;">
                    <div class="kupon-title-bold">${kupon.title}</div>
                    <div class="kupon-date-time">${kuponStartTime.date} - ƒ∞lk Ma√ß: ${kuponStartTime.time}</div> 
                    
                    <div class="kupon-risk-indicator" style="color: ${riskColor}; border: 1px solid ${riskColor};">
                        Risk Seviyesi: <span class="risk-dot ${riskClass}" style="width:12px; height:12px;"></span> <span style="font-weight: 900; color: ${riskColor};">${kupon.risk.toUpperCase()}</span>
                    </div>

                    <div style="margin-top: 15px; margin-bottom: 15px;">${matchesHTML}</div>

                    <div class="total-odd-area">
                        <div class="kupon-title-bold" style="font-size: 16px;">TOPLAM ORAN</div>
                        <span class="total-odd-value">x${totalOdd.toFixed(2)}</span>
                        
                        <div class="kupon-extra-info">
                            <div>Ortalama G√ºven: <span style="color: var(--success);">${confidence.toFixed(1)}%</span></div>
                            <div>√ñnerilen Stake: <span style="color: var(--tech-blue);">${kupon.stake || 'Belirtilmemi≈ü'}</span></div>
                        </div>
                    </div>
                </div>
            </div>
        `;
        contentDiv.innerHTML += kuponCard;
    });
}

// Sekme Y√∂netimi ve Ba≈ülangƒ±√ß Y√ºklemesi
document.addEventListener('DOMContentLoaded', () => {
    const tabs = document.querySelectorAll('.tab');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            tabs.forEach(t => {
                t.classList.remove('active');
                t.setAttribute('aria-selected', 'false');
            });
            tab.classList.add('active');
            tab.setAttribute('aria-selected', 'true');
            
            const tabKey = tab.getAttribute('data-tab');
            if (tabKey === 'kuponlar') {
                renderKuponlar();
            } else {
                renderMatches(tabKey); 
            }
        });
    });

    // Sayfa y√ºklendiƒüinde varsayƒ±lan olarak Y√úKSEK G√úVEN tahminlerini g√∂ster
    const defaultTab = document.querySelector('.tab[data-tab="high_conf"]');
    if (defaultTab) {
        defaultTab.classList.add('active');
        defaultTab.setAttribute('aria-selected', 'true');
        renderMatches('high_conf');
    }
});
</script>
</body>
</html>
