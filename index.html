<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="robots" content="noindex, nofollow"> 
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>BasketbolAi - Tahminler</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
<style>
  /*
  *** STƒ∞L TANIMLARI - KEMƒ∞K KOD KORUNDU ***
  */
  :root{
    --bg:#0f1720;
    --panel:#0b1620;
    --card-bg:#0f2230;
    --accent-start:#7b2ff7;
    --accent-end:#3b8dff;
    --orange:#ff7a00;
    --tech-blue:#3ba4ff;
    --success:#28d07b;
    --warning:#ffd460;
    --high-risk:#ff7a00; 
    --muted:#96a0b5;
    --text:#e6eef8; 
    --gold-text: #ffd460; 
    --radius:18px;
    /* YENƒ∞ SOFT SEKME RENKLERƒ∞ */
    --tab-default-bg: #1c3042; 
    --tab-active-start: #3ba4ff; 
    --tab-active-end: #7b2ff7; 
    --tab-active-bg: linear-gradient(90deg, var(--tab-active-start), var(--tab-active-end)); 
  }
  
  /* Risk Renk E≈üle≈ümeleri - YENƒ∞ KURALA G√ñRE G√úNCELLENDƒ∞ (√áOK D√ú≈û√úK KALDIRILDI) */
  .risk-y√ºksek-g√ºven { background-color: var(--success); color: var(--success); }
  .risk-orta-g√ºven { background-color: var(--warning); color: var(--warning); }
  .risk-y√ºksek-risk { background-color: var(--high-risk); color: var(--high-risk); } /* Y√ºksek Risk rengi korundu */

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:'Inter',system-ui,Segoe UI,Roboto,-apple-system,Helvetica,Arial;
    background: linear-gradient(180deg, rgba(23,12,37,0.9), rgba(12,12,20,1));
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-smoothing:grayscale;
    padding:18px;
    display:flex;justify-content:center;
  }
  .container{
    width:100%;
    max-width:420px;
    border-radius:26px;
    overflow:hidden;
    background:linear-gradient(90deg,var(--accent-start),var(--accent-end));
    padding:14px;
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
  }
  .inner{
    border-radius:16px;
    /* BASKETBOL DOKUNU≈ûU: PARKET ZEMƒ∞N ETKƒ∞Sƒ∞ */
    background: 
      repeating-linear-gradient(90deg, #111e2b, #111e2b 1px, transparent 1px, transparent 100px),
      repeating-linear-gradient(0deg, #111e2b, #111e2b 1px, transparent 1px, transparent 100px),
      var(--panel); 
    background-blend-mode: overlay; 
    background-size: 100% 100%, 100% 100%, 100% 100%;
    
    padding:14px;
  }
  .header{
    display:flex;
    flex-direction: column; 
    align-items:center;
    justify-content:center; 
    margin-bottom:12px;
  }
  .title{
    font-weight:800;
    font-size:18px; 
    line-height:1.2;
    color:var(--text);
    white-space: nowrap; 
    margin-bottom: 4px; 
  }
  .powered-by-ai {
    font-size: 14px; 
    font-weight: 600; 
    color: var(--tech-blue); 
    opacity: 1; 
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  
  /* YENƒ∞ SEKME D√úZENLEMESƒ∞: ƒ∞LK SIRAYA SIƒûDIRMA */
  .tabs{
    display:flex;
    flex-wrap: wrap; 
    gap: 6px; 
    margin: 14px 0; 
    justify-content: space-between;
  } 
  .tab{
    /* Sadece iki sekme (T√ºm Ma√ßlar ve Kuponlar) olduƒüu i√ßin yarƒ± yarƒ±ya b√∂l√ºnd√º */
    flex: 1 1 48%; 
    padding: 8px 3px; 
    border-radius: 10px;
    text-align: center;
    font-weight: 700;
    cursor: pointer;
    font-size: 12px; 
    background: var(--tab-default-bg); 
    color: var(--text);
    white-space: nowrap; 
    transition: all 0.2s ease;
    min-width: 0; 
  }
  
  .tab.active{
    background: var(--tab-active-bg);
    color: #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.5); 
    border: 1px solid rgba(255,255,255,0.2); 
  }
  .content{padding-bottom:18px}
  
  /* G√úVEN ORANLARININ OLDUƒûU ALAN D√úZENLEMESƒ∞ */
  .success-rates {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 5px 0;
  }
  .success-rate-item {
      flex-grow: 1;
      text-align: left; 
  }
  .success-rate-item:nth-child(2) {
      flex-grow: 0;
      text-align: right; 
  }
  .rate-label {
    font-size: 11px;
    color: var(--muted);
    font-weight: 500;
    text-transform: uppercase;
  }
  .rate-value {
    font-weight: 900;
    font-size: 18px;
    margin-top: 4px;
    color: var(--success); 
    display: block;
    line-height: 1;
  }

  /* MATCH CARD */
  .match-card{
    background:var(--card-bg);border-radius:12px;padding:12px;margin-bottom:12px;border:1px solid rgba(255,255,255,0.02)
  }
  .match-head{display:flex;justify-content:space-between;align-items:flex-start;gap:8px;margin-bottom:12px}
  .match-title{font-weight:800;font-size:16px; line-height: 1.3;}
  .match-datetime {
    font-weight: 600; 
    color: var(--warning); 
    font-size: 13px; 
    display: block; 
    margin-top: 4px;
  }
  .risk-ev-wrap{display:flex;flex-direction:column;align-items:flex-end;gap:4px;}
  /* Rƒ∞SK METNƒ∞ ƒ∞√áƒ∞N YENƒ∞ RENK UYGULAMASI */
  .risk-text {
      font-size: 14px; 
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 6px;
  }
  .risk-dot{width:10px;height:10px;border-radius:50%;display:inline-block;}

  /* TAHMƒ∞N Bƒ∞LGƒ∞LERƒ∞ */
  .bet-preference{
    font-weight:800;
    color:var(--tech-blue);
    font-size:14px;
    margin-top:8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px dashed rgba(255,255,255,0.15); /* √áizgi eklendi */
    padding-bottom: 8px;
  }
  .bet-preference span.barem-value {
    font-weight: 700;
    color: var(--orange);
    font-size: 16px;
  }
  .bet{
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.1));
    border-radius:10px;padding:12px;margin-top:8px;border:1px solid rgba(255,255,255,0.02)
  }
  .bet-detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    padding-bottom: 8px;
    border-bottom: 1px dashed rgba(255,255,255,0.1);
  }
  .bet-detail-row:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
  }
  /* HANDƒ∞KAP TAHMƒ∞N YAZAN YERLER SARI */
  .bet-col-left {
    font-weight:800;
    color:var(--gold-text); 
    font-size:15px;
  }
  .bet-col-right {
    text-align: right;
  }
  /* ORANLAR BEYAZ YAPILDI */
  .bet .odd{font-size:28px;font-weight:900;margin-bottom:2px;color:var(--text);}
  .muted-small{color:var(--muted);font-size:11px; font-weight: 500;}
  
  /* PROGRESS BAR */
  .progress-wrap{background:rgba(255,255,255,0.04);height:10px;border-radius:999px;margin-top:8px;overflow:hidden}
  .progress-bar{height:100%;width:0%;transition:width 600ms ease}
  .progress-bar.conf { background: var(--success); }
  .confidence-row{display:flex;justify-content:space-between;align-items:center;margin-top:8px;color:var(--muted);font-size:13px}
  .confidence-row span:last-child {
      font-weight: 700;
      color: var(--text);
  }

  /* KUPON STƒ∞LLERƒ∞ */
  .kupon-title-bold {
      font-size: 18px;
      font-weight: 900;
      color: var(--warning); 
      margin-bottom: 10px;
      text-align: center;
  }
  .kupon-match-row {
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.05);
      border-left: 4px solid var(--accent-end);
  }
  .kupon-match-title {
      font-weight: 600;
      font-size: 14px;
      color: var(--text);
  }
  .kupon-bet-detail {
      font-weight: 800;
      font-size: 16px;
      color: var(--success);
      margin-top: 4px;
      display: flex;
      justify-content: space-between;
  }
  /* ORANLAR BEYAZ YAPILDI */
  .kupon-odd-value {
      color: var(--text);
      font-size: 18px;
      font-weight: 900;
  }
  .kupon-risk-indicator {
      font-size: 14px;
      font-weight: 700;
      margin-top: 15px;
      padding: 8px 15px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.05);
  }
  .kupon-date-time {
    font-size: 13px; 
    color: var(--muted); 
    font-weight: 600; 
    margin-bottom: 10px;
    display: block;
    width: 100%;
    text-align: center;
  }

  /* TOPLAM ORAN ALANI */
  .total-odd-area {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 2px dashed rgba(255,255,255,0.1);
      width: 100%;
      text-align: center;
  }
  .total-odd-value {
      font-size: 40px;
      font-weight: 900;
      color: var(--orange);
      line-height: 1;
      display: block;
  }
  .kupon-confidence-row {
      margin-top: 10px;
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
  }
  .kupon-confidence-row span:last-child {
      color: var(--success);
      font-weight: 800;
      margin-left: 5px;
  }
  .kupon-extra-info {
      display: flex;
      justify-content: space-around;
      align-items: center;
      width: 100%;
      margin-top: 15px;
      font-size: 14px;
      font-weight: 600;
      padding: 10px 0;
  }

  /* Sistem Online G√∂stergesi */
  @keyframes pulse-online {
    0% { box-shadow: 0 0 0 0 rgba(40, 208, 123, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(40, 208, 123, 0); }
    100% { box-shadow: 0 0 0 0 rgba(40, 208, 123, 0); }
  }
  .system-online-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: flex-end; 
  }
  .online-dot {
    width: 10px;
    height: 10px;
    background-color: var(--success);
    border-radius: 50%;
    animation: pulse-online 1.5s infinite;
  }
</style>
</head>
<body>
<div class="container" role="application" aria-label="BasketballAi WebApp">
  <div class="inner">
    <div class="header">
        <div class="title">üèÄ BASKETBOL AI BOT v5.0</div>
        <div class="powered-by-ai">POWERED BY AI</div>
    </div>

    <div class="success-rates"> 
      <div class="success-rate-item">
        <span class="rate-label">Ortalama Ba≈üarƒ±</span>
        <span class="rate-value" style="color: var(--success);">%79</span> 
      </div>
      
      <div class="success-rate-item system-online-indicator">
        <div style="font-size:12px;color:var(--success); font-weight:700; white-space: nowrap;">Sƒ∞STEM ONLƒ∞NE</div>
        <div class="online-dot"></div>
      </div>
    </div>

    <div class="tabs" role="tablist" aria-label="Ana Sekmeler">
      <div class="tab" data-tab="all_matches" role="tab" aria-selected="true">T√úM MA√áLAR</div> 
      <div class="tab" data-tab="kuponlar" role="tab" aria-selected="false">üî• KUPONLAR</div> 
    </div>

    <div class="content" id="content">
      </div>

  </div>
</div>

<script>
// ****************************** YARDIMCI FONKSƒ∞YONLAR ******************************

// Ma√ßƒ±n risk seviyesini (Y√ºksek G√ºven, Orta G√ºven, Y√ºksek Risk) belirler.
function getRiskByConfidence(risk_label_raw) {
    const risk_label = risk_label_raw.includes('Y√ºksek G√ºven') ? 'Y√úKSEK G√úVEN' 
                     : risk_label_raw.includes('Orta G√ºven') ? 'ORTA G√úVEN'
                     : risk_label_raw.includes('Y√ºksek Risk') ? 'Rƒ∞SK' // ƒ∞stenen deƒüi≈üiklik
                     : 'BELƒ∞RSƒ∞Z';

    const risk_class = risk_label_raw.includes('Y√ºksek G√ºven') ? 'risk-y√ºksek-g√ºven' 
                     : risk_label_raw.includes('Orta G√ºven') ? 'risk-orta-g√ºven'
                     : 'risk-y√ºksek-risk'; 
    
    return { label: risk_label, class: risk_class };
}

// G√ºven y√ºzdesini risk seviyesine g√∂re atar (sadece g√∂sterim ama√ßlƒ±)
function getConfidencePercentage(risk_label_raw) {
    if (risk_label_raw.includes('Y√ºksek G√ºven')) return Math.floor(Math.random() * (85 - 80 + 1)) + 80;
    if (risk_label_raw.includes('Orta G√ºven')) return Math.floor(Math.random() * (79 - 70 + 1)) + 70;
    if (risk_label_raw.includes('Y√ºksek Risk')) return Math.floor(Math.random() * (69 - 60 + 1)) + 60;
    return 70;
}

// Yardƒ±mcƒ± Fonksiyon: Risk sƒ±nƒ±fƒ±nƒ± ve rengini d√∂nd√ºr√ºr (Kuponlar i√ßin)
function getRiskInfo(risk_class) {
    let colorVar;
    if (risk_class === 'risk-y√ºksek-g√ºven') colorVar = '--success';
    else if (risk_class === 'risk-orta-g√ºven') colorVar = '--warning';
    else if (risk_class === 'risk-y√ºksek-risk') colorVar = '--high-risk';
    else colorVar = '--muted';
    
    const color = getComputedStyle(document.documentElement).getPropertyValue(colorVar);
    return { class: risk_class, color: color }; 
}

// Yardƒ±mcƒ± Fonksiyon: Kuponun toplam oranƒ±nƒ± ve ortalama g√ºvenini hesaplar (Dinamik Hesaplama)
function calculateKuponStats(kupon) {
    let totalOdd = 1;
    let totalConfidence = 0;
    
    if (kupon.matches.length === 0) {
        return { totalOdd: 0, confidence: 0 };
    }

    kupon.matches.forEach(match => {
        totalOdd *= match.odd;
        // Kupon g√ºven seviyesini kullanarak ma√ßlara g√ºven y√ºzdesi ata
        if(kupon.risk_label_kupon.includes('Y√ºksek G√ºven')) totalConfidence += getConfidencePercentage('ü•á Y√ºksek G√ºven');
        else if(kupon.risk_label_kupon.includes('Orta G√ºven')) totalConfidence += getConfidencePercentage('ü•à Orta G√ºven');
        else if(kupon.risk_label_kupon.includes('Y√ºksek Risk')) totalConfidence += getConfidencePercentage('‚ö†Ô∏è Y√ºksek Risk');
        else totalConfidence += 70; 
    });

    const averageConfidence = totalConfidence / kupon.matches.length;
    
    return { 
        totalOdd: totalOdd, 
        confidence: averageConfidence 
    };
}

// Yardƒ±mcƒ± Fonksiyon: Kuponun ilk ma√ßƒ±nƒ±n tarih ve saatini bulur
function getKuponStartTime(kupon) {
    if (kupon.matches.length === 0) return { date: "Tarih Belirsiz", time: "Saat Belirsiz" };
    
    const earliestMatch = kupon.matches.reduce((earliest, current) => {
        const timeA = MATCH_MAP[current.title]?.time || '23:59';
        const timeB = earliest ? MATCH_MAP[earliest.title]?.time || '23:59' : timeA;
        return (timeA.localeCompare(timeB) < 0) ? current : earliest;
    }, kupon.matches[0]); 
    
    return { date: 'Bug√ºn', time: MATCH_MAP[earliestMatch.title]?.time || 'Belirsiz' };
}


// ****************************** VERƒ∞ YAPILARI - YENƒ∞ Lƒ∞STE Y√úKLENƒ∞YOR ******************************

const BASE_PREDICTIONS_RAW = [
    { title: "Paris Basket - Dijon", prediction: "MS1", handikap_value: "‚Äì10.5", odd: 1.67, time: "17:30", risk_label: "ü•á Y√ºksek G√ºven", note: "Paris evinde fark yaratƒ±r", league: "Fransa LNB" },
    { title: "Lleida - Valencia", prediction: "MS2", handikap_value: "-5.5", odd: 1.67, time: "18:00", risk_label: "ü•á Y√ºksek G√ºven", note: "Valencia kalite farkƒ±yla ge√ßer", league: "ƒ∞spanya Kupasƒ±" },
    { title: "Alba Berlin - Ulm", prediction: "MS1", handikap_value: "‚Äì2.5", odd: 1.64, time: "17:30", risk_label: "ü•á Y√ºksek G√ºven", note: "D√º≈ü√ºk handikap, i√ß saha avantajƒ±", league: "Almanya BBL" },
    { title: "Bc Dubai - Cluj Napoca", prediction: "MS2", handikap_value: "-10.5", odd: 1.50, time: "17:00", risk_label: "ü•á Y√ºksek G√ºven", note: "Cluj formda, Dubai handikaplƒ±", league: "EuroCup" },
    
    { title: "Cedevita - Zadar", prediction: "MS2", handikap_value: "+8.5", odd: 1.53, time: "18:00", risk_label: "ü•à Orta G√ºven", note: "Avantajlƒ± ama ADL ligi deƒüi≈üken", league: "Adriyatik Ligi" },
    { title: "Miasto Szkla - Trefl Sopot", prediction: "MS2", handikap_value: "-7.5", odd: 1.63, time: "18:30", risk_label: "ü•à Orta G√ºven", note: "Sopot kaliteli ama deplasman", league: "Polonya EBL" },
    { title: "Starwings - Bbc Nyon", prediction: "MS1", handikap_value: "+12.5", odd: 1.68, time: "17:00", risk_label: "ü•à Orta G√ºven", note: "ƒ∞√ß saha avantajƒ± var", league: "ƒ∞svi√ßre Ligi" },
    { title: "Oberwart - Ece Bulls", prediction: "MS1", handikap_value: "-7.5", odd: 1.64, time: "18:30", risk_label: "ü•à Orta G√ºven", note: "Dengeli ma√ß, handikap iyi", league: "Avusturya BSL" },
    
    { title: "Trento - Derthona", prediction: "MS1", handikap_value: "‚Äì3.5", odd: 1.69, time: "17:00", risk_label: "‚ö†Ô∏è Y√ºksek Risk", note: "ƒ∞talya ligi dengeli", league: "ƒ∞talya A1" },
    { title: "Lattes Montpel - Asvel (K)", prediction: "MS2", handikap_value: "+7.5", odd: 1.62, time: "17:30", risk_label: "‚ö†Ô∏è Y√ºksek Risk", note: "Kadƒ±nlar ligi deƒüi≈üken", league: "Fransa Kadƒ±nlar" },
    { title: "Sokol Pisek - Slavia Praha", prediction: "MS1", handikap_value: "-10.5", odd: 1.64, time: "18:00", risk_label: "‚ö†Ô∏è Y√ºksek Risk", note: "√áEK ligi √ßok deƒüi≈üken", league: "√áekya NBL" },
    { title: "Komarno - Rytieri", prediction: "MS1", handikap_value: "-3.5", odd: 1.61, time: "19:00", risk_label: "‚ö†Ô∏è Y√ºksek Risk", note: "SLVK ligi belirsiz", league: "Slovakya Extraliga" },
    { title: "Benedetto - Roseto Sharks", prediction: "MS2", handikap_value: "+7.5", odd: 1.59, time: "19:00", risk_label: "‚ö†Ô∏è Y√ºksek Risk", note: "T2 ligi riskli", league: "ƒ∞talya A2" },
    { title: "Del Fes - Torino", prediction: "MS1", handikap_value: "-4.5", odd: 1.67, time: "19:00", risk_label: "‚ö†Ô∏è Y√ºksek Risk", note: "T2 ligi, d√º≈ü√ºk handikap", league: "ƒ∞talya A2" },
];

// T√ºm ma√ßlara g√ºven y√ºzdesi ve risk sƒ±nƒ±flarƒ± ekle
const RAW_ALL_PREDICTIONS = BASE_PREDICTIONS_RAW.map(match => ({
    ...match,
    // Risk etiketine g√∂re sƒ±nƒ±f ve y√ºzde ata
    ...getRiskByConfidence(match.risk_label), 
    confidence: getConfidencePercentage(match.risk_label),
    // secondary_prediction alanƒ±nƒ± Handikap deƒüeri ile dolduralƒ±m, √ß√ºnk√º Alt/√úst yok
    secondary_prediction: `H ${match.handikap_value}`,
}));


// Kupon Verileri (Kuponlar sekmesi i√ßin)
const KUPON_DATA = [
    { 
        title: "üîí Kupon 1: G√úVENLƒ∞ ƒ∞Kƒ∞Lƒ∞", 
        risk_label_kupon: 'ü•á Y√ºksek G√ºven',
        confidence_kupon: 87, // Doƒürudan atanan kupon g√ºveni
        stake: "Ortalama G√ºven: %85+. √áOK D√ú≈û√úK Rƒ∞SK.",
        matches: [
            { title: "Paris Basket - Dijon", prediction: "MS1", odd: 1.67, barem_value: "‚Äì10.5" }, 
            { title: "Lleida - Valencia", prediction: "MS2", odd: 1.62, barem_value: "-5.5" }, // Kupondaki handikap -5.5
        ]
    },
    { 
        title: "üíé Kupon 2: ORTA Rƒ∞SKLƒ∞ √ú√áL√ú",
        risk_label_kupon: 'ü•à Orta G√ºven',
        confidence_kupon: 77, // Doƒürudan atanan kupon g√ºveni
        stake: "Ortalama G√ºven: %75. D√ú≈û√úK Rƒ∞SK.",
        matches: [
            { title: "Paris Basket - Dijon", prediction: "MS1", odd: 1.67, barem_value: "‚Äì10.5" }, 
            { title: "Lleida - Valencia", prediction: "MS2", odd: 1.62, barem_value: "-5.5" },
            { title: "Alba Berlin - Ulm", prediction: "MS1", odd: 1.64, barem_value: "‚Äì2.5" },
        ]
    },
    { 
        title: "üé≤ Kupon 3: Y√úKSEK Rƒ∞SKLƒ∞ D√ñRTL√ú", 
        risk_label_kupon: '‚ö†Ô∏è Y√ºksek Risk',
        confidence_kupon: 67, // Doƒürudan atanan kupon g√ºveni
        stake: "Ortalama G√ºven: %65. ORTA Rƒ∞SK.",
        matches: [
            { title: "Paris Basket - Dijon", prediction: "MS1", odd: 1.67, barem_value: "‚Äì10.5" }, 
            { title: "Lleida - Valencia", prediction: "MS2", odd: 1.62, barem_value: "-5.5" },
            { title: "Alba Berlin - Ulm", prediction: "MS1", odd: 1.64, barem_value: "‚Äì2.5" },
            { title: "Bc Dubai - Cluj Napoca", prediction: "MS2", odd: 1.65, barem_value: "-10.5" }, // Bc Dubai ma√ßƒ± handikapƒ± 1.50 oranƒ±yla +10.5 Dubai idi. Kupona handikapƒ± ve MS2 tercihini ekledim.
        ]
    },
];

// MATCH_MAP olu≈üturuluyor (Ma√ß ba≈ülƒ±klarƒ±na g√∂re eri≈üim i√ßin)
const MATCH_MAP = RAW_ALL_PREDICTIONS.reduce((acc, match) => {
    acc[match.title] = match;
    return acc;
}, {});

// Kupon verilerine dinamik g√ºven deƒüerleri ekleniyor (sadece g√∂sterim ama√ßlƒ±)
KUPON_DATA.forEach(kupon => {
    kupon.matches.forEach(match => {
        const fullMatch = MATCH_MAP[match.title];
        match.confidence = fullMatch ? fullMatch.confidence : getConfidencePercentage(kupon.risk_label_kupon);
        match.barem_value = match.barem_value || (fullMatch ? fullMatch.handikap_value : 'N/A');
    });
});


// ****************************** RENDER FONKSƒ∞YONLARI ******************************

// Ma√ß Tahminlerini Listeler
function renderMatches(filterType) {
    const contentDiv = document.getElementById('content');
    contentDiv.innerHTML = ''; 

    let filteredMatches = [...RAW_ALL_PREDICTIONS];
    
    // Saate g√∂re sƒ±rala
    filteredMatches.sort((a, b) => a.time.localeCompare(b.time));

    if (filteredMatches.length === 0) {
        contentDiv.innerHTML = '<p style="text-align:center; color:var(--muted); padding:20px;">Bug√ºn i√ßin yayƒ±nlanmƒ±≈ü tahmin bulunmamaktadƒ±r.</p>';
        return;
    }

    filteredMatches.forEach(match => {
        // Dinamik Risk Belirleme (Veriden alƒ±nƒ±yor)
        const riskLabel = match.label;
        const riskClass = match.class;
        const riskColor = getComputedStyle(document.documentElement).getPropertyValue(`--${riskClass.split('-')[1]}`); // risk-y√ºksek-g√ºven -> --success

        // Handikap deƒüeri ve etiketi
        const baremText = 'Handikap'; 
        const baremValue = match.handikap_value; 

        // Handikap tahmininin metnini ayarlama (Bu kƒ±sƒ±m kaldƒ±rƒ±ldƒ±)
        // const predictionText = `${match.prediction} Handikap`;

        const matchCard = `
            <div class="match-card">
                <div class="match-head">
                    <div class="match-info">
                        <div class="match-title">${match.title}</div>
                        <span class="match-datetime">${match.league} | ${match.time}</span>
                    </div>
                    <div class="risk-ev-wrap">
                        <div class="risk-text" style="color: ${riskColor};">
                            <span class="risk-dot ${riskClass}"></span>
                            ${riskLabel}
                        </div>
                    </div>
                </div>

                <div class="bet-preference">
                    <div>Robot Tercihi: <span style="font-size: 18px; font-weight: 900; color: var(--success); margin-left: 5px;">${match.prediction}</span></div>
                    <div>${baremText}: <span class="barem-value">${baremValue}</span></div> 
                </div>

                <div class="bet">
                    <div class="bet-detail-row">
                        <div class="bet-col-left">ORAN</div> 
                        <div class="bet-col-right">
                            <span class="odd">${match.odd.toFixed(2)}</span>
                            <span class="muted-small" style="display:block;">ORAN</span>
                        </div>
                    </div>
                    
                    <div class="bet-detail-row">
                        <div class="bet-col-left" style="color: var(--text); font-size: 14px;">A√áIKLAMA</div>
                        <div class="bet-col-right">
                            <span style="font-weight:600; color: var(--gold-text); font-size: 13px; text-align: right;">${match.note}</span>
                        </div>
                    </div>
                    
                    <div class="confidence-row">
                        <span>Robot G√ºven Deƒüeri:</span>
                        <span style="color: var(--success);">${match.confidence}%</span>
                    </div>
                    <div class="progress-wrap">
                        <div class="progress-bar conf" style="width:${match.confidence}%;"></div>
                    </div>
                </div>
            </div>
        `;
        contentDiv.innerHTML += matchCard;
    });
}

// Kuponlarƒ± Listeler (Dinamik Hesaplama i√ßerir)
function renderKuponlar() {
    const contentDiv = document.getElementById('content');
    contentDiv.innerHTML = '';

    KUPON_DATA.forEach(kupon => {
        // ƒ∞stenen Oranlar ve G√ºven Y√ºzdeleri Statik olarak girildiƒüinden, doƒürudan kullanƒ±lƒ±yor.
        const kuponName = kupon.title.split(': ')[1];
        let totalOdd;
        let avgConfidence;
        let kuponRiskText;
        let kuponRiskClass;
        let kuponRiskColor;

        if (kuponName === 'G√úVENLƒ∞ ƒ∞Kƒ∞Lƒ∞') {
            totalOdd = 2.70;
            avgConfidence = 87.0; 
            kuponRiskText = '√áOK D√ú≈û√úK Rƒ∞SK';
            kuponRiskClass = 'risk-y√ºksek-g√ºven';
        } else if (kuponName === 'ORTA Rƒ∞SKLƒ∞ √ú√áL√ú') {
            totalOdd = 4.43;
            avgConfidence = 77.0;
            kuponRiskText = 'D√ú≈û√úK Rƒ∞SK';
            kuponRiskClass = 'risk-orta-g√ºven';
        } else if (kuponName === 'Y√úKSEK Rƒ∞SKLƒ∞ D√ñRTL√ú') {
            totalOdd = 7.30;
            avgConfidence = 67.0;
            kuponRiskText = 'ORTA Rƒ∞SK';
            kuponRiskClass = 'risk-y√ºksek-risk';
        } else {
            totalOdd = calculateKuponStats(kupon).totalOdd;
            avgConfidence = calculateKuponStats(kupon).confidence;
            kuponRiskText = 'BELƒ∞RSƒ∞Z Rƒ∞SK';
            kuponRiskClass = 'risk-y√ºksek-risk';
        }
        
        kuponRiskColor = getRiskInfo(kuponRiskClass).color;
        
        const kuponStartTime = getKuponStartTime(kupon); 
        
        let matchesHTML = kupon.matches.map(bet => {
            // T√ºm etiketler Handikap olarak g√ºncellendi.
            const displayType = 'Handikap';
            // Handikap deƒüeri, tahminin yanƒ±nda parantez i√ßinde g√∂sterilir.
            const displayPrediction = `${bet.prediction} (${bet.barem_value})`;

            // Ma√ßƒ±n bireysel risk renklerini kullan
            const matchRiskClass = MATCH_MAP[bet.title] ? MATCH_MAP[bet.title].class : 'risk-y√ºksek-risk';
            // Y√ºksek Risk -> Rƒ∞SK olarak g√∂steriliyor
            const matchRiskLabel = MATCH_MAP[bet.title] ? MATCH_MAP[bet.title].label : 'Rƒ∞SK'; 
            const matchConfidence = MATCH_MAP[bet.title] ? MATCH_MAP[bet.title].confidence : 60;
            const matchRiskColor = getRiskInfo(matchRiskClass).color;

            return `
                <div class="kupon-match-row">
                    <div class="kupon-match-title">${bet.title}</div>
                    <div class="kupon-bet-detail">
                        <span>${displayPrediction} (${displayType})</span>
                        <span class="kupon-odd-value">@${bet.odd.toFixed(2)}</span>
                    </div>
                    <div class="confidence-row" style="padding: 0; margin-top: 5px;">
                        <span>Ma√ß G√ºven:</span>
                        <span style="color: ${matchRiskColor}; font-weight: 800;">${matchConfidence}% (${matchRiskLabel})</span>
                    </div>
                </div>
            `;
        }).join('');

        const kuponCard = `
            <div class="match-card">
                <div style="text-align: center;">
                    <div class="kupon-title-bold">${kupon.title}</div>
                    <div class="kupon-date-time">${kuponStartTime.date} - ƒ∞lk Ma√ß: ${kuponStartTime.time}</div> 
                    
                    <div class="kupon-risk-indicator" style="color: ${kuponRiskColor}; border: 1px solid ${kuponRiskColor};">
                        Risk Seviyesi: <span class="risk-dot ${kuponRiskClass}"></span> <span style="font-weight: 900; color: ${kuponRiskColor};">${kuponRiskText}</span>
                    </div>

                    <div style="margin-top: 15px; margin-bottom: 15px;">${matchesHTML}</div>

                    <div class="total-odd-area">
                        <div class="kupon-title-bold" style="font-size: 16px;">TOPLAM ORAN</div>
                        <span class="total-odd-value">x${totalOdd.toFixed(2)}</span>
                        
                        <div class="kupon-extra-info">
                            <div>Ortalama G√ºven: <span style="color: var(--success);">${avgConfidence.toFixed(1)}%</span></div>
                            <div>A√ßƒ±klama: <span style="color: var(--tech-blue); font-size: 12px; white-space: normal; line-height: 1.4;">${kupon.stake || 'Belirtilmemi≈ü'}</span></div>
                        </div>
                    </div>
                </div>
            </div>
        `;
        contentDiv.innerHTML += kuponCard;
    });
}

// Sekme Y√∂netimi ve Ba≈ülangƒ±√ß Y√ºklemesi
document.addEventListener('DOMContentLoaded', () => {
    const tabs = document.querySelectorAll('.tab');
    
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            tabs.forEach(t => {
                t.classList.remove('active');
                t.setAttribute('aria-selected', 'false');
            });
            tab.classList.add('active');
            tab.setAttribute('aria-selected', 'true');
            
            const tabKey = tab.getAttribute('data-tab');
            if (tabKey === 'kuponlar') {
                renderKuponlar();
            } else if (tabKey === 'all_matches') {
                renderMatches(tabKey); 
            }
        });
    });

    // Sayfa y√ºklendiƒüinde varsayƒ±lan olarak T√úM MA√áLAR tahminlerini g√∂ster
    const defaultTab = document.querySelector('.tab[data-tab="all_matches"]');
    if (defaultTab) {
        defaultTab.classList.add('active');
        defaultTab.setAttribute('aria-selected', 'true');
        renderMatches('all_matches');
    }
});
</script>
</body>
</html>
