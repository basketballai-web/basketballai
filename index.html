<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">🤖 Basketbol Robot Analizleri</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Genel Stil ve Tema Renkleri */
        :root {
            --primary-blue: #00bcd4; /* Robot Beyin Mavisi */
            --secondary-orange: #ff9800; /* Basketbol Turuncusu */
            --dark-blue: #011f4b; /* Arka Plan Koyu Mavi */
            --light-yellow: #ffeb3b; /* Vurgu Sarı */
            --white-text: #ffffff;
            --off-white: #f0f0f0;
            --card-bg: rgba(255, 255, 255, 0.1);
            --shadow-color: rgba(0, 0, 0, 0.3);
            /* Yeni Analiz Renkleri */
            --deepseek-bg: #1c1c1c; /* Robot Kart Arka Planı */
            --deepseek-green: #4CAF50; /* Başarılı Tespit */
            --deepseek-red: #f44336; /* Kritik Uyarı */
            --deepseek-yellow: #FFC107; /* Dikkat Gereken */
            --deepseek-border: #3f51b5;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--dark-blue);
            color: var(--white-text);
            margin: 0;
            padding: 0;
            background-image: radial-gradient(circle at top left, var(--dark-blue) 0%, #000d23 100%);
            min-height: 100vh;
        }

        /* Başlık Alanı */
        header {
            background: linear-gradient(135deg, var(--dark-blue), #004d40);
            padding: 20px 0 10px 0;
            text-align: center;
            border-bottom: 5px solid var(--primary-blue);
            box-shadow: 0 4px 15px var(--shadow-color);
        }

        header h1 {
            color: var(--light-yellow);
            text-shadow: 2px 2px 4px var(--shadow-color);
            margin: 0;
            font-size: 2.5em;
        }
        
        header p {
            color: var(--primary-blue);
            margin: 5px 0 0 0;
            font-style: italic;
        }

        /* Dil Seçim Alanı Stili */
        .language-selector {
            margin-top: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .lang-button {
            padding: 5px 15px;
            border: 2px solid var(--primary-blue);
            background-color: var(--dark-blue);
            color: var(--primary-blue);
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.2s ease;
        }

        .lang-button:hover {
            background-color: rgba(0, 188, 212, 0.2);
        }

        .lang-button.active {
            background-color: var(--primary-blue);
            color: var(--dark-blue);
            box-shadow: 0 0 10px var(--light-yellow);
        }

        /* Ana İçerik Konteyneri */
        .container {
            width: 95%;
            max-width: 1400px;
            margin: 20px auto;
            padding: 10px;
        }

        /* Sekmeler (Tabs) */
        .tabs {
            display: flex;
            justify-content: flex-start; /* Sekmelerin sayısını azalttık */
            background-color: #01356b;
            border-radius: 10px 10px 0 0;
            margin-bottom: 10px;
            box-shadow: 0 5px 15px var(--shadow-color);
        }

        .tab-button {
            flex-grow: 0;
            padding: 15px 25px;
            cursor: pointer;
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
            color: var(--off-white);
            background: #01356b;
            border: none;
            transition: all 0.3s ease;
            border-radius: 10px 10px 0 0;
            position: relative;
            overflow: hidden;
        }

        .tab-button:hover {
            background-color: var(--dark-blue);
            color: var(--primary-blue);
        }

        .tab-button.active {
            background-color: var(--primary-blue);
            color: var(--dark-blue);
            box-shadow: inset 0 -4px 0 var(--light-yellow);
            z-index: 1;
        }
        
        /* Sekme İçerikleri */
        .tab-content {
            display: none;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 0 0 10px 10px;
            min-height: 500px;
            border: 1px solid var(--primary-blue);
            box-shadow: 0 4px 20px var(--shadow-color);
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Genel Başlıklar */
        h2 {
            color: var(--secondary-orange);
            border-bottom: 2px solid var(--primary-blue);
            padding-bottom: 5px;
            margin-top: 0;
        }

        /* ---------------------------------------------------- */
        /* ROBOT KARŞILAŞTIRMALI ANALİZ STİLİ */
        /* ---------------------------------------------------- */
        .deepseek-analysis-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .deepseek-match-card {
            background-color: var(--deepseek-bg);
            border: 3px solid var(--deepseek-border);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
        }

        .deepseek-match-card h3 {
            color: var(--primary-blue);
            border-bottom: 2px solid var(--secondary-orange);
            padding-bottom: 10px;
            margin-top: 0;
            font-size: 1.5em;
        }

        .deepseek-decision {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .deepseek-decision span:first-child {
            color: var(--light-yellow);
        }

        .deepseek-decision span:last-child {
            background-color: var(--secondary-orange);
            color: var(--dark-blue);
            padding: 5px 10px;
            border-radius: 5px;
        }

        .deepseek-section h4 {
            color: var(--deepseek-green);
            margin-top: 15px;
            margin-bottom: 5px;
        }

        .deepseek-section ul {
            list-style: none;
            padding: 0;
        }

        .deepseek-section li {
            padding: 5px 0;
            border-bottom: 1px dotted rgba(255, 255, 255, 0.2);
        }
        
        .deepseek-icon {
            margin-right: 8px;
            font-size: 1.2em;
        }

        .deepseek-icon.success { color: var(--deepseek-green); }
        .deepseek-icon.warning { color: var(--deepseek-yellow); }
        .deepseek-icon.alert { color: var(--deepseek-red); }

        .deepseek-evaluation {
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid;
        }

        .deepseek-evaluation.valid {
            background-color: rgba(76, 175, 80, 0.2);
            border-color: var(--deepseek-green);
            color: var(--deepseek-green);
        }

        .deepseek-evaluation.caution {
            background-color: rgba(255, 193, 7, 0.2);
            border-color: var(--deepseek-yellow);
            color: var(--deepseek-yellow);
        }
        
        /* Alternatif Bahisler */
        .alternative-bets {
            margin-top: 25px;
            padding: 15px;
            border: 1px dashed var(--secondary-orange);
            border-radius: 8px;
        }

        .alternative-bets h4 {
            color: var(--secondary-orange);
            border-bottom: 1px solid var(--secondary-orange);
            padding-bottom: 5px;
        }

        .alternative-bets ol {
            padding-left: 20px;
        }

        .alternative-bets li {
            margin-bottom: 5px;
        }

        /* Maç Kartları (Genel Tablo) */
        .match-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .match-card {
            background-color: #01356b;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--primary-blue);
        }
        .match-header {
            border-bottom: 1px solid var(--primary-blue);
            padding-bottom: 10px;
            margin-bottom: 10px;
        }
        .match-title {
            font-weight: bold;
            font-size: 1.2em;
            color: var(--light-yellow);
        }
        .match-meta {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.6);
            display: flex;
            justify-content: space-between;
        }
        .prediction-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dotted rgba(255, 255, 255, 0.2);
        }
        .prediction-label {
            font-weight: bold;
            color: var(--primary-blue);
        }
        .prediction-detail span {
            padding: 4px 8px;
            border-radius: 5px;
            font-weight: bold;
            margin-left: 5px;
        }
        .prediction-ms { background-color: rgba(255, 152, 0, 0.2); color: var(--secondary-orange); }
        .prediction-ts { background-color: rgba(0, 188, 212, 0.2); color: var(--primary-blue); }
        .odds-ms, .odds-ts { 
            background-color: var(--deepseek-bg); 
            color: var(--white-text); 
            border: 1px solid var(--secondary-orange);
            font-size: 0.9em;
        }
        .confidence-cell {
            padding: 4px 8px;
            border-radius: 5px;
            font-weight: bold;
        }
        .confidence-high { background-color: rgba(76, 175, 80, 0.2); color: #4CAF50; }
        .confidence-medium { background-color: rgba(255, 193, 7, 0.2); color: var(--light-yellow); }
        .confidence-low { background-color: rgba(244, 67, 54, 0.2); color: #f44336; }


        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            background-color: #000d23;
            border-top: 2px solid var(--primary-blue);
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.6);
        }
    </style>
</head>
<body>

    <header>
        <h1><i class="fas fa-robot" style="color: var(--primary-blue);"></i> <span id="mainTitleText">Basketbol Robot Analizleri</span> <i class="fas fa-basketball-ball" style="color: var(--secondary-orange);"></i></h1>
        <p id="poweredByText">NBA Maçları - Robot Karşılaştırmalı Analiz</p>

        <div class="language-selector">
            <button class="lang-button active" data-lang="tr">Türkçe</button>
            <button class="lang-button" data-lang="en">English</button>
        </div>
        </header>

    <div class="container">
        <div class="tabs">
            <button class="tab-button active" data-tab="tab-deepseek" id="tabBtnDeepseek"><i class="fas fa-brain"></i> ROBOT KARŞILAŞTIRMALI ANALİZ</button>
            <button class="tab-button" data-tab="tab-table" id="tabBtnTable"><i class="fas fa-table"></i> Detaylı Tahminler</button>
        </div>

        <div id="tab-deepseek" class="tab-content active">
            <h2 id="deepseekHeader"><i class="fas fa-brain"></i> Robot Karşılaştırmalı Analiz Raporu</h2>
            <div class="deepseek-analysis-container">
                </div>
            
            <div class="deepseek-match-card" style="margin-top: 30px;">
                <h3 id="generalEvaluationTitle"><i class="fas fa-chart-line"></i> Genel Robot Değerlendirmesi ve Kritik Notlar</h3>
                <div id="generalEvaluationContent">
                    </div>
            </div>
        </div>

        <div id="tab-table" class="tab-content">
            <h2 id="tableHeader"><i class="fas fa-list-ol"></i> Maçların Robot Tahmin Tablosu</h2>
            <div class="match-list">
                 </div>
            <p style="margin-top:20px; font-size: 0.9em; color: rgba(255, 255, 255, 0.7);" id="tableNote">*MS Tahmini: MS1 - H.Rakamı (Ev Sahibi Handikaplı Kazanır) veya MS2 + H.Rakamı (Deplasman Handikaplı Kazanır). Oranlar tahmin edilen sonuca aittir.</p>
        </div>

    </div>

    <footer id="footerText">
        <p>Basketbol Robot Tahmin Analizleri | Robot Analizleri | Powered by AI</p>
        <p>Unutmayın: Bahis bir şans oyunudur ve kaybetme riski taşır. Lütfen sorumlu oynayın.</p>
    </footer>

    <script>
        // =========================================================================
        // TAHMİN VERİLERİ (Sadece Analizdeki 2 Maç Kullanılarak Oluşturuldu)
        // =========================================================================
        const detailedData = [
            // OKLAHOMA vs HOUSTON (MS1 - Orta-Yüksek Güven - Orta Tavsiye)
            // Analizdeki öneri: Oklahoma ML / Oklahoma -3.5 Spread / Over 222.5 Total Points
            {
                id: 1, saat: "03:00", lig: "NBA", ev: "OKLAHOMA CITY", dep: "HOUSTON ROCKETS", 
                ms1: 1.62, ms2: 2.10, h1: 3.5, h2: null, ms_tahmin: "MS1", 
                ts: 222.5, alt: 1.65, ust: 1.62, ts_tahmin: "ÜST", 
                guven: 70, reason: "Ev sahibi avantajı, form üstünlüğü. Yüksek skor bekleniyor.", 
                handikap_yon: "-"
            },
            // LA LAKERS vs GOLDEN STATE (MS1 - Orta Güven - Orta Tavsiye)
            // Analizdeki öneri: Lakers ML / Over 230.5 Total Points
            {
                id: 2, saat: "05:30", lig: "NBA", ev: "LA LAKERS", dep: "GOLDEN STATE WARRIORS", 
                ms1: 1.70, ms2: 2.00, h1: 1.5, h2: null, ms_tahmin: "MS1", 
                ts: 230.5, alt: 1.60, ust: 1.66, ts_tahmin: "ÜST", 
                guven: 65, reason: "Form Lakers lehine, ancak sakatlıklar kritik. Yüksek skor daha güvenli.", 
                handikap_yon: "-"
            }
        ];


        // Kuponları Temizledim - Sadece Analiz Maçları Kaldığı İçin Kupon Sekmesini Kaldırdım.
        const coupons = []; 

        // =========================================================================
        // ROBOT ANALİZ VERİLERİ (Eski DeepSeek Verisi, Robot İsmine Çevrildi)
        // =========================================================================
        const deepSeekAnalysisTR = [
            {
                match: "OKLAHOMA vs HOUSTON", decision: "Oklahoma Kazanır", confidence: "Orta-Yüksek Güven", advice: "ORTA Tavsiye",
                evaluation: "✅ MANTIKLI", evaluationClass: "valid",
                correctObservations: ["Form avantajı Oklahoma'da (3-2 vs 2-3)", "H2H üstünlük Oklahoma'da (3-2)", "Ev sahibi avantajı önemli faktör", "Motivasyon analizi dengeli"],
                missingChecks: ["⚠️ Sakatlık durumları - Maç saatinde kontrol şart", "⚠️ Back-to-back durumu - Houston'ın seyahat programı", "⚠️ Oklahoma'nın ev performansı vs Houston'ın deplasman performansı karşılaştırması eksik"],
                alternativeBets: [
                    {type: "ANA", selection: "Oklahoma ML", confidence: "Orta-Yüksek"}, 
                    {type: "ALTERNATİF", selection: "Oklahoma -3.5 Spread", confidence: "Daha değerli oran"}, 
                    {type: "GÜVENLE", selection: "Over 222.5 Total Points", confidence: "Her iki takım ortalama 113+ sayı"}
                ]
            },
            {
                match: "LA LAKERS vs GOLDEN STATE", decision: "Lakers Kazanır", confidence: "Orta Güven", advice: "ORTA Tavsiye",
                evaluation: "⚠️ DİKKATLİ YAKLAŞILMALI", evaluationClass: "caution",
                correctObservations: ["Form Lakers lehine (3-2 vs 2-3)", "H2H avantaj Lakers'ta", "Ev sahibi faktörü doğru", "Her iki takımın da defansif zayıflığı tespit edilmiş"],
                missingChecks: ["🚨 Warriors tarihi Lakers'a karşı iyi oynar - Sadece son 5 maç yeterli değil", "🚨 Defansif zayıflıklar = Yüksek skorlu maç - Total bahisleri daha güvenli olabilir", "⚠️ Steph Curry faktörü - Sakatlık durumu kritik", "⚠️ LeBron/AD sağlık durumu - Kontrol edilmeli"],
                alternativeBets: [
                    {type: "ANA", selection: "Lakers ML", confidence: "Sakatlık kontrolü sonrası"}, 
                    {type: "DAHA GÜVENLİ", selection: "Over 230.5 Total Points", confidence: "Her iki takım zayıf defans, güçlü ofans"}, 
                    {type: "ALTERNATİF", selection: "1. Yarı Over", confidence: "Tempolu başlangıç beklenir"}
                ]
            }
        ];

        const deepSeekAnalysisEN = [
            {
                match: "OKLAHOMA vs HOUSTON", decision: "Oklahoma Win", confidence: "Medium-High Confidence", advice: "MEDIUM Recommendation",
                evaluation: "✅ LOGICAL", evaluationClass: "valid",
                correctObservations: ["Form advantage with Oklahoma (3-2 vs 2-3)", "H2H superiority with Oklahoma (3-2)", "Home advantage is an important factor", "Motivation analysis balanced"],
                missingChecks: ["⚠️ Injury status - Must be checked at game time", "⚠️ Back-to-back status - Houston's travel schedule", "⚠️ Comparison of Oklahoma's home performance vs Houston's away performance is missing"],
                alternativeBets: [
                    {type: "MAIN", selection: "Oklahoma ML", confidence: "Medium-High"}, 
                    {type: "ALTERNATIVE", selection: "Oklahoma -3.5 Spread", confidence: "Better value odds"}, 
                    {type: "SAFE", selection: "Over 222.5 Total Points", confidence: "Both teams average 113+ points"}
                ]
            },
            {
                match: "LA LAKERS vs GOLDEN STATE", decision: "Lakers Win", confidence: "Medium Confidence", advice: "MEDIUM Recommendation",
                evaluation: "⚠️ CAUTION REQUIRED", evaluationClass: "caution",
                correctObservations: ["Form favors Lakers (3-2 vs 2-3)", "H2H advantage with Lakers", "Home factor is correct", "Defensive weaknesses of both teams detected"],
                missingChecks: ["🚨 Warriors historically play well against Lakers - Last 5 matches are not enough", "🚨 Defensive weaknesses = High-scoring match - Total bets might be safer", "⚠️ Steph Curry factor - Injury status is critical", "⚠️ LeBron/AD health status - Must be checked"],
                alternativeBets: [
                    {type: "MAIN", selection: "Lakers ML", confidence: "After injury check"}, 
                    {type: "SAFER", selection: "Over 230.5 Total Points", confidence: "Both teams weak defense, strong offense"}, 
                    {type: "ALTERNATIVE", selection: "1st Half Over", confidence: "Fast-paced start expected"}
                ]
            }
        ];

        // =========================================================================
        // DİL SABİTLERİ VE FONKSİYONLAR
        // =========================================================================
        const langData = {
            tr: {
                pageTitle: "🤖 Basketbol Robot Analizleri", mainTitleText: "Basketbol Robot Analizleri", poweredByText: "NBA Maçları - Robot Karşılaştırmalı Analiz",
                tabBtnDeepseek: "ROBOT KARŞILAŞTIRMALI ANALİZ", tabBtnTable: "Detaylı Tahminler",
                deepseekHeader: "Robot Karşılaştırmalı Analiz Raporu",
                decision: "Robot Kararı:", advice: "Robot Tavsiyesi:",
                correctObservationsTitle: "Doğru Tespitler:", missingChecksTitle: "Gözden Kaçan/Kontrol Edilmesi Gerekenler:",
                generalEvaluationTitle: "Genel Robot Değerlendirmesi ve Kritik Notlar",
                methodologyTitle: "Robot Metodolojisi:", methodologyScore: "7/10",
                methodologyPoints: ["✅ Sistematik yaklaşım", "✅ Kriterleri net tanımlamış", "⚠️ Sakatlık ve güncel bilgi kontrolü eksik", "⚠️ Pace/tempo faktörü gözardı edilmiş"],
                criticalNotesTitle: "⚠️ KRİTİK NOTLAR: Maç Öncesi MUTLAKA Kontrol Et",
                criticalNotes: ["🏥 Sakatlık/Hastalık raporları (özellikle Curry, LeBron, AD)", "📅 Back-to-back maç durumu", "🧑‍⚖️ Hakem ataması (Over/Under etkiler)", "📊 Son 24 saatteki odds hareketi"],
                generalAdvice: "Genel Tavsiye: Robot analizi mantıklı temel oluşturmuş, ancak **canlı verilere göre revize edilmeli**. Oklahoma bahsi daha güvenli görünüyor, Lakers maçında ise **TOTAL bahisleri** daha akıllıca olabilir.",
                alternativeBetsTitle: "💡 ALTERNATİF BAHİS ÖNERİLERİ",
                footerText: `<p>Basketbol Robot Tahmin Analizleri | Robot Analizleri | Powered by AI</p><p>Unutmayın: Bahis bir şans oyunudur ve kaybetme riski taşır. Lütfen sorumlu oynayın.</p>`,
                labelTime: "Saat/Lig:", labelMs: "MS Tahmini:", labelTs: "ALT/ÜST Tahmini:", labelConf: "Güven:",
                tableHeader: "Maçların Robot Tahmin Tablosu", tableNote: "*MS Tahmini: MS1 - H.Rakamı (Ev Sahibi Handikaplı Kazanır) veya MS2 + H.Rakamı (Deplasman Handikaplı Kazanır). Oranlar tahmin edilen sonuca aittir.",
                reasonTitle: "**Robot Yorumu:**",
            },
            en: {
                pageTitle: "🤖 Basketball Robot Analysis", mainTitleText: "Basketball Robot Analysis", poweredByText: "NBA Matches - Robot Comparative Analysis",
                tabBtnDeepseek: "ROBOT COMPARATIVE ANALYSIS", tabBtnTable: "Detailed Predictions",
                deepseekHeader: "Robot Comparative Analysis Report",
                decision: "Robot Decision:", advice: "Robot Recommendation:",
                correctObservationsTitle: "Correct Observations:", missingChecksTitle: "Missing/Required Checks:",
                generalEvaluationTitle: "General Robot Evaluation and Critical Notes",
                methodologyTitle: "Robot Methodology:", methodologyScore: "7/10",
                methodologyPoints: ["✅ Systematic approach", "✅ Clearly defined criteria", "⚠️ Missing check for injuries and up-to-date info", "⚠️ Pace/tempo factor overlooked"],
                criticalNotesTitle: "⚠️ CRITICAL NOTES: MUST Check Before Game",
                criticalNotes: ["🏥 Injury/Illness reports (especially Curry, LeBron, AD)", "📅 Back-to-back game status", "🧑‍⚖️ Referee assignment (affects Over/Under)", "📊 Odd movement in the last 24 hours"],
                generalAdvice: "General Advice: Robot analysis provides a logical foundation, but **must be revised based on live data**. The Oklahoma bet seems safer, while **TOTAL bets** might be wiser for the Lakers match.",
                alternativeBetsTitle: "💡 ALTERNATIVE BET SUGGESTIONS",
                footerText: `<p>Basketball Robot Prediction Analysis | Robot Analysis | Powered by AI</p><p>Disclaimer: Betting is a game of chance and carries the risk of loss. Please play responsibly.</p>`,
                labelTime: "Time/League:", labelMs: "FT Prediction:", labelTs: "O/U Prediction:", labelConf: "Confidence:",
                tableHeader: "Robot Match Prediction Table", tableNote: "*FT Prediction: FT1 - H.Number (Home Handicap Win) or FT2 + H.Number (Away Handicap Win). Odds belong to the predicted outcome.",
                reasonTitle: "**Robot Comment:**",
            }
        };

        let currentLang = 'tr';

        // Helper functions from the original script (getConfidenceClass, getStarRating, etc.)
        function getConfidenceClass(guven) {
            if (guven >= 75) return 'confidence-high';
            if (guven >= 60) return 'confidence-medium';
            return 'confidence-low';
        }
        function getStarRating(guven) {
            if (guven >= 80) return '★★★';
            if (guven >= 75) return '★★';
            if (guven >= 65) return '★';
            return '';
        }
        function formatMSTahmin(match) {
            let handikap_deger = match.h1 || match.h2;
            let yon = match.handikap_yon;
            const ms_tip = match.ms_tahmin;
            const oran = ms_tip === 'MS1' ? match.ms1 : match.ms2;
            const ms_tip_display = currentLang === 'en' ? ms_tip.replace('MS', 'FT') : ms_tip;

            if (!handikap_deger) {
                 return `<span class="prediction-ms ${ms_tip}">${ms_tip_display}</span><span class="odds-ms">${oran.toFixed(2)}</span>`;
            }
            const handikap_str = handikap_deger ? ` ${yon}${handikap_deger}` : '';
            return `<span class="prediction-ms ${ms_tip}">${ms_tip_display}${handikap_str}</span><span class="odds-ms">${oran.toFixed(2)}</span>`;
        }
        function formatTSTahmin(match) {
            const ts_cizgi = match.ts; 
            const ts_tip = match.ts_tahmin;
            const oran = ts_tip === 'ALT' ? match.alt : match.ust;
            let ts_tip_display;
            if (currentLang === 'en') {
                ts_tip_display = ts_tip === 'ALT' ? 'UNDER' : 'OVER';
            } else {
                ts_tip_display = ts_tip;
            }
            return `<span class="prediction-ts ${ts_tip}">${ts_cizgi} ${ts_tip_display}</span><span class="odds-ts">${oran.toFixed(2)}</span>`;
        }

        // =========================================================================
        // ROBOT ANALİZİNİ DOLDURMA (DeepSeek isminden arındırıldı)
        // =========================================================================

        function fillDeepSeekAnalysis() {
            const container = document.querySelector('#tab-deepseek .deepseek-analysis-container');
            const generalContent = document.getElementById('generalEvaluationContent');
            const lang = langData[currentLang];
            const analysisData = currentLang === 'en' ? deepSeekAnalysisEN : deepSeekAnalysisTR;

            container.innerHTML = '';
            
            // 1. Maç Analiz Kartlarını Doldur
            analysisData.forEach(analysis => {
                const card = document.createElement('div');
                card.classList.add('deepseek-match-card');

                // Doğru Tespitler Listesi
                const correctList = analysis.correctObservations.map(item => `<li><i class="deepseek-icon success fas fa-check"></i> ${item}</li>`).join('');
                
                // Gözden Kaçanlar Listesi
                const missingList = analysis.missingChecks.map(item => {
                    let text = item.replace('🚨', '').replace('⚠️', '').trim();
                    let iconClass = item.includes('🚨') ? 'alert fas fa-exclamation-circle' : 'warning fas fa-exclamation-triangle';
                    return `<li><i class="deepseek-icon ${iconClass.split(' ')[0]}" class="${iconClass}"></i> ${text}</li>`;
                }).join('');

                // Alternatif Bahisler Listesi
                const altBetsList = analysis.alternativeBets.map(bet => `
                    <li><strong>${bet.type}:</strong> ${bet.selection} 
                    <span style="color: var(--secondary-orange); font-size: 0.9em;">(${bet.confidence})</span></li>
                `).join('');

                // Değerlendirme Sınıfı
                const evaluationClass = analysis.evaluationClass;

                card.innerHTML = `
                    <h3>${analysis.match}</h3>
                    
                    <div class="deepseek-decision">
                        <span>${lang.decision} ${analysis.decision}</span>
                        <span>${analysis.confidence} | ${lang.advice} ${analysis.advice}</span>
                    </div>

                    <div class="deepseek-evaluation ${evaluationClass}">
                        <span>${analysis.evaluation}</span>
                        <i class="fas fa-${evaluationClass === 'valid' ? 'thumbs-up' : 'exclamation-triangle'}"></i>
                    </div>

                    <div class="deepseek-section">
                        <h4>${lang.correctObservationsTitle}</h4>
                        <ul>${correctList}</ul>
                    </div>

                    <div class="deepseek-section">
                        <h4>${lang.missingChecksTitle}</h4>
                        <ul>${missingList}</ul>
                    </div>
                    
                    <div class="alternative-bets">
                        <h4>${lang.alternativeBetsTitle}</h4>
                        <ol>${altBetsList}</ol>
                    </div>
                `;
                container.appendChild(card);
            });
            
            // 2. Genel Değerlendirme ve Kritik Notları Doldur
            const methodologyList = lang.methodologyPoints.map(item => {
                const text = item.replace('✅', '').replace('⚠️', '').trim();
                let iconClass = item.includes('⚠️') ? 'warning fas fa-exclamation-triangle' : 'success fas fa-check';
                return `<li><i class="deepseek-icon ${iconClass.split(' ')[0]}" class="${iconClass}"></i> ${text}</li>`;
            }).join('');

            const criticalNotesList = lang.criticalNotes.map(item => {
                const icon = item.split(' ')[0]; // İlk kısım (ikona benzeyen)
                const text = item.substring(item.indexOf(' ') + 1); // Kalan metin
                const iconMap = {'🏥': 'fas fa-hospital', '📅': 'fas fa-calendar-day', '🧑‍⚖️': 'fas fa-gavel', '📊': 'fas fa-chart-bar'};
                const iconHtml = `<i class="deepseek-icon alert ${iconMap[icon] || 'fas fa-exclamation-triangle'}"></i>`;
                
                return `<li>${iconHtml} ${text}</li>`;
            }).join('');
            
            generalContent.innerHTML = `
                <div style="display: flex; gap: 20px;">
                    <div style="flex: 1;">
                        <h4 style="color: var(--light-yellow);">${lang.methodologyTitle} <span style="color: var(--secondary-orange);">${lang.methodologyScore}</span></h4>
                        <ul style="list-style: none; padding-left: 0;">${methodologyList}</ul>
                    </div>
                    <div style="flex: 1; border-left: 1px dashed rgba(255, 255, 255, 0.3); padding-left: 20px;">
                        <h4 style="color: var(--deepseek-red);">${lang.criticalNotesTitle}</h4>
                        <ul style="list-style: none; padding-left: 0;">${criticalNotesList}</ul>
                    </div>
                </div>
                <div style="margin-top: 15px; padding: 10px; border: 2px solid var(--primary-blue); border-radius: 8px; background: rgba(0, 188, 212, 0.1);">
                    <p style="font-weight: bold; margin: 0;">${lang.generalAdvice}</p>
                </div>
            `;

        }


        // Tabloyu Doldurma Fonksiyonu (Kart Yapısı)
        function fillTable() {
            const container = document.querySelector('#tab-table .match-list');
            container.innerHTML = '';
            const lang = langData[currentLang];

            detailedData.forEach(match => {
                const card = document.createElement('div');
                card.classList.add('match-card');
                
                // Analiz kartlarındaki neden açıklamalarını bulalım
                let reasonText = '';
                const analysisItem = (currentLang === 'en' ? deepSeekAnalysisEN : deepSeekAnalysisTR).find(a => a.match.includes(match.ev.split(' ')[0]) || a.match.includes(match.dep.split(' ')[0]));
                if (analysisItem) {
                     // Analizdeki ALTERNATİF BAHİSLER kısmındaki Güvenle/Safer bahsini alalım
                    const saferBet = analysisItem.alternativeBets.find(b => b.type === (currentLang === 'en' ? 'SAFER' : 'DAHA GÜVENLİ') || b.type === (currentLang === 'en' ? 'SAFE' : 'GÜVENLE'));
                    if (saferBet) {
                        reasonText = `${saferBet.selection} (${saferBet.confidence})`;
                    } else {
                        // Eğer Safer yoksa ana yorumu alalım
                        reasonText = match.reason || (currentLang === 'en' ? 'Detailed analysis available in the main tab.' : 'Detaylı analiz ana sekmede mevcuttur.');
                    }
                } else {
                    reasonText = match.reason || (currentLang === 'en' ? 'General analysis.' : 'Genel analiz.');
                }


                card.innerHTML = `
                    <div class="match-header">
                        <div class="match-title">${match.ev} vs ${match.dep}</div>
                        <div class="match-meta">
                            <span>#${match.id}</span>
                            <span>${match.saat} | ${match.lig}</span>
                        </div>
                    </div>

                    <div class="prediction-section">
                        <div class="prediction-row">
                            <span class="prediction-label">${lang.labelMs}</span>
                            <div class="prediction-detail">${formatMSTahmin(match)}</div>
                        </div>
                        <div class="prediction-row">
                            <span class="prediction-label">${lang.labelTs}</span>
                            <div class="prediction-detail">${formatTSTahmin(match)}</div>
                        </div>
                        <div class="prediction-row" style="background-color: rgba(0, 188, 212, 0.1);">
                            <span class="prediction-label">${lang.labelConf}</span>
                            <div class="prediction-detail">
                                <span class="confidence-cell ${getConfidenceClass(match.guven)}">${match.guven}% ${getStarRating(match.guven)}</span>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.9em;"><i class="fas fa-robot"></i> ${lang.reasonTitle} ${reasonText}</p>
                `;
                container.appendChild(card);
            });
        }
        
        // Arayüz Çeviri Fonksiyonu
        function translateUI(lang) {
            const data = langData[lang];
            
            // Başlık
            document.getElementById('pageTitle').textContent = data.pageTitle;
            document.getElementById('mainTitleText').textContent = data.mainTitleText;
            document.getElementById('poweredByText').textContent = data.poweredByText;
            
            // Sekme Butonları
            document.getElementById('tabBtnDeepseek').innerHTML = `<i class="fas fa-brain"></i> ${data.tabBtnDeepseek}`;
            document.getElementById('tabBtnTable').innerHTML = `<i class="fas fa-table"></i> ${data.tabBtnTable}`;

            // Tablo Başlıkları
            document.getElementById('deepseekHeader').innerHTML = `<i class="fas fa-brain"></i> ${data.deepseekHeader}`;
            document.getElementById('tableHeader').innerHTML = `<i class="fas fa-list-ol"></i> ${data.tableHeader}`;
            document.getElementById('tableNote').innerHTML = data.tableNote;
            document.getElementById('generalEvaluationTitle').innerHTML = `<i class="fas fa-chart-line"></i> ${data.generalEvaluationTitle}`;


            // Footer
            document.getElementById('footerText').innerHTML = data.footerText;

            // Dinamik içerikleri yeniden yükle
            fillDeepSeekAnalysis();
            fillTable();
        }

        // Sekme İşleyicisi
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                const targetTabId = button.getAttribute('data-tab');
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(targetTabId).classList.add('active');
            });
        });

        // Dil Seçim İşleyicisi
        document.querySelectorAll('.lang-button').forEach(button => {
            button.addEventListener('click', () => {
                const newLang = button.getAttribute('data-lang');
                if (newLang !== currentLang) {
                    currentLang = newLang;
                    document.querySelectorAll('.lang-button').forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    translateUI(currentLang);
                }
            });
        });

        // Sayfa Yüklendiğinde
        document.addEventListener('DOMContentLoaded', () => {
            translateUI(currentLang); 

            // Başlangıçta Robot Analizi sekmesini aktif et
            document.getElementById('tabBtnDeepseek').click();
        });
    </script>
</body>
</html>
